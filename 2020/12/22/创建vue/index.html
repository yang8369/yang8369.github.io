<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>VUE入门笔记 | Yang's Notes</title><meta name="keywords" content="vue-elementui,前端"><meta name="author" content="Yang"><meta name="copyright" content="Yang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="一、创建vue ①通过cmd 打开vue 可视化界面  ②在创建中找到目录并开始创建">
<meta property="og:type" content="article">
<meta property="og:title" content="VUE入门笔记">
<meta property="og:url" content="https://yang8369.github.io/2020/12/22/%E5%88%9B%E5%BB%BAvue/index.html">
<meta property="og:site_name" content="Yang&#39;s Notes">
<meta property="og:description" content="一、创建vue ①通过cmd 打开vue 可视化界面  ②在创建中找到目录并开始创建">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png">
<meta property="article:published_time" content="2020-12-22T02:44:28.000Z">
<meta property="article:modified_time" content="2020-12-22T03:50:30.965Z">
<meta property="article:author" content="Yang">
<meta property="article:tag" content="vue-elementui">
<meta property="article:tag" content="前端">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://yang8369.github.io/2020/12/22/%E5%88%9B%E5%BB%BAvue/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: {"limitDay":365,"position":"top","messagePrev":"It has been","messageNext":"days since the last update, the content of the article may be outdated."},
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: true,
    post: true
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Yang","link":"Link: ","source":"Source: Yang's Notes","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: true
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}

// https://stackoverflow.com/questions/16839698/jquery-getscript-alternative-in-native-javascript
const getScript = url => new Promise((resolve, reject) => {
  const script = document.createElement('script')
  script.src = url
  script.async = true
  script.onerror = reject
  script.onload = script.onreadystatechange = function() {
    const loadState = this.readyState
    if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
    script.onload = script.onreadystatechange = null
    resolve()
  }
  document.head.appendChild(script)
})</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-12-22 11:50:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}const fontSizeVal = saveToLocal.get('global-font-size')
if (fontSizeVal !== undefined) {
  document.documentElement.style.setProperty('--global-font-size', fontSizeVal + 'px')
}})()</script><style type="text/css">#toggle-sidebar {bottom: 80px}</style><meta name="generator" content="Hexo 5.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/eee.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">17</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">Tags</div><div class="length-num">20</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">Categories</div><div class="length-num">19</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 電影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Yang's Notes</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 清單</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音樂</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 電影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 關於</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">VUE入门笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-12-22T02:44:28.000Z" title="Created 2020-12-22 10:44:28">2020-12-22</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-12-22T03:50:30.965Z" title="Updated 2020-12-22 11:50:30">2020-12-22</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/HTML/">HTML</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="一、创建vue"><a href="#一、创建vue" class="headerlink" title="一、创建vue"></a>一、创建vue</h2><p><img src=".%5Cimg%5Cimage-20201130102246771.png" alt="image-20201130102246771"></p>
<p>①通过cmd 打开vue 可视化界面</p>
<p><img src=".%5Cimg%5Cimage-20201130102335086.png" alt="image-20201130102335086"></p>
<p>②在创建中找到目录并开始创建</p>
<p><img src=".%5Cimg%5Cimage-20201130102437128.png" alt="image-20201130102437128"></p>
<p><em><a id="more"></a></em></p>
<p>③输入项目名称 以及 git初始化信息</p>
<p><img src=".%5Cimg%5Cimage-20201130102555400.png" alt="image-20201130102555400"></p>
<p><img src=".%5Cimg%5Cimage-20201130102615809.png" alt="image-20201130102615809"></p>
<p>④进入 “下一步” 在预设中 可以打开曾经保存的 预设模板 也可以手动配置</p>
<p>下面进行“手动”教学</p>
<p><img src=".%5Cimg%5Cimage-20201130102735915.png"></p>
<p>⑤进入功能面板 选择 babel  、 路由 router、 Linter/ Formatter代码格式校验、 使用配置文件</p>
<p><img src=".%5Cimg%5Cimage-20201130102856643.png" alt="image-20201130102856643"></p>
<p><img src=".%5Cimg%5Cimage-20201130103107736.png" alt="image-20201130103107736"></p>
<p>⑥配置</p>
<p><img src=".%5Cimg%5Cimage-20201130103255330.png" alt="image-20201130103255330"></p>
<p>⑦是否保存为预设</p>
<p><img src=".%5Cimg%5Cimage-20201130103309367.png" alt="image-20201130103309367"></p>
<p>⑧安装 elementui 在插件中 搜索 vue-cli-plugin-element 目前版本为1.0.1</p>
<p><img src=".%5Cimg%5Cimage-20201130104321245.png" alt="image-20201130104321245"></p>
<p><img src=".%5Cimg%5Cimage-20201130103602826.png" alt="image-20201130103602826"></p>
<p>⑨配置 elementui  将 Fully import（默认） 改为 Import on demand</p>
<p>完整导入 改为 按需导入 防止代码过于臃肿</p>
<p><img src=".%5Cimg%5Cimage-20201130103729254.png" alt="image-20201130103729254"></p>
<p>⑩配置 axios 在依赖中 找到 安装依赖 ，选择 “运行依赖” 搜索 axios 找到目前的版本 并且进行安装</p>
<p><img src=".%5Cimg%5Cimage-20201130104354001.png" alt="image-20201130104354001"></p>
<p><img src=".%5Cimg%5Cimage-20201130104455567.png" alt="image-20201130104455567"></p>
<h2 id="二、创建gitee"><a href="#二、创建gitee" class="headerlink" title="二、创建gitee"></a>二、创建gitee</h2><p>①创建SSH公钥  按照以下步骤 即可实现 </p>
<p><img src=".%5Cimg%5Cimage-20201130111855677.png" alt="image-20201130111855677"></p>
<p><img src=".%5Cimg%5Cimage-20201130111654427.png" alt="image-20201130111654427"></p>
<p><img src=".%5Cimg%5Cimage-20201130111721774.png" alt="image-20201130111721774"></p>
<p><img src=".%5Cimg%5Cimage-20201130111737037.png" alt="image-20201130111737037"></p>
<p><img src=".%5Cimg%5Cimage-20201130111754519.png" alt="image-20201130111754519"></p>
<p>②创建仓库  填写仓库唯一名称 以及 不勾选  点击创建即可</p>
<p><img src=".%5Cimg%5Cimage-20201130111958488.png" alt="image-20201130111958488"></p>
<p><img src=".%5Cimg%5Cimage-20201130111943712.png" alt="image-20201130111943712"></p>
<p><img src=".%5Cimg%5Cimage-20201130112139231.png" alt="image-20201130112139231"></p>
<p><img src=".%5Cimg%5Cimage-20201130112155827.png" alt="image-20201130112155827"></p>
<p>②找到创建文件的根目录</p>
<p><img src=".%5Cimg%5Cimage-20201130113051836.png" alt="image-20201130113051836"></p>
<p>③ shift+右键进入 powershell 窗口</p>
<p><img src=".%5Cimg%5Cimage-20201130113149886.png" alt="image-20201130113149886"></p>
<p>④检查项目的状态 git status</p>
<p><img src=".%5Cimg%5Cimage-20201130113251426.png" alt="image-20201130113251426"></p>
<p>⑤进行 将项目提交到缓存区  git add .   &lt;==别漏掉这个点</p>
<p><img src=".%5Cimg%5Cimage-20201130113337996.png" alt="image-20201130113337996"></p>
<p>⑥ 现在本地进行一次提交 git commit -m “add files”</p>
<p><img src=".%5Cimg%5Cimage-20201130113428162.png" alt="image-20201130113428162"></p>
<p>⑦再次检查 git status</p>
<p><img src=".%5Cimg%5Cimage-20201130113536961.png" alt="image-20201130113536961"></p>
<p>⑧分别输入 </p>
<p><img src=".%5Cimg%5Cimage-20201130113854854.png" alt="image-20201130113854854"></p>
<p>git remote add origin <a target="_blank" rel="noopener" href="https://gitee.com/yang7759/vue_shop.git">https://gitee.com/yang7759/vue_shop.git</a></p>
<p>git push -u origin master</p>
<p><img src=".%5Cimg%5Cimage-20201130113614511.png" alt="image-20201130113614511"></p>
<p>⑨输入码云的账号/邮箱和密码 </p>
<p><img src=".%5Cimg%5Cimage-20201130114008392.png" alt="image-20201130114008392"></p>
<p><img src=".%5Cimg%5Cimage-20201130114016415.png" alt="image-20201130114016415"></p>
<h2 id="三、开始执行项目"><a href="#三、开始执行项目" class="headerlink" title="三、开始执行项目"></a>三、开始执行项目</h2><p>①在项目中打开</p>
<p><img src=".%5Cimg%5Cimage-20201130141344694.png" alt="image-20201130141344694"></p>
<p>②进入 PowerShell  </p>
<p>npm install 安装所有依赖项  </p>
<h3 id="node-app-js-运行接口文档"><a href="#node-app-js-运行接口文档" class="headerlink" title="node .\app.js  运行接口文档"></a>node .\app.js  运行接口文档</h3><p>（若出现mysql连接错误，在 config / default.json中修改mysql的密码）</p>
<p>③登录/退出功能</p>
<p><img src=".%5Cimg%5Cimage-20201130141623857.png" alt="image-20201130141623857"></p>
<p>如果前端和服务器存在跨域问题 token可以维持登录状态，（跨域：协议/域名/端口不同）</p>
<h2 id="四、开始"><a href="#四、开始" class="headerlink" title="四、开始"></a><img src=".%5Cimg%5Cimage-20201130141940519.png" alt="image-20201130141940519">四、开始</h2><h4 id="①打开-vue-ui-在-任务中-开始-serve-启动app"><a href="#①打开-vue-ui-在-任务中-开始-serve-启动app" class="headerlink" title="①打开 vue ui 在 任务中 开始 serve   启动app"></a>①打开 vue ui 在 任务中 开始 serve   启动app</h4><p><img src=".%5Cimg%5Cimage-20201130161907968.png" alt="image-20201130161907968"></p>
<p>出现界面</p>
<p><img src=".%5Cimg%5Cimage-20201130162705790.png" alt="image-20201130162705790"></p>
<p>清理文件 并且删除 不必要的组件</p>
<p><img src=".%5Cimg%5Cimage-20201130162838214.png" alt="image-20201130162838214"></p>
<p>路由</p>
<p><img src=".%5Cimg%5Cimage-20201130162822559.png" alt="image-20201130162822559"></p>
<h4 id="②创建新的-Login单文件组件"><a href="#②创建新的-Login单文件组件" class="headerlink" title="②创建新的 Login单文件组件"></a>②创建新的 Login单文件组件</h4><p><img src=".%5Cimg%5Cimage-20201130165009215.png" alt="image-20201130165009215"></p>
<p>结构 template 模板</p>
<p>行为  script</p>
<p>样式  style</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;style lang &#x3D; &quot;less&quot; scoped&gt;&lt;&#x2F;style&gt;</span><br><span class="line">支持less语法格式，同时scopd表示组件样式的生效区间 scoped表示只在当前组件生效 否则 全局生效。</span><br></pre></td></tr></table></figure>
<h4 id="③第一次路由router组合-进入路由"><a href="#③第一次路由router组合-进入路由" class="headerlink" title="③第一次路由router组合 进入路由"></a>③第一次路由router组合 进入路由</h4><p>导入 新的组件 在规则数组中添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">path: &#39;&#x2F;login&#39;,    路径</span><br><span class="line">component: Login,   属性 import 中 的 Login</span><br><span class="line">name: Login     组件中定义的名字 name</span><br></pre></td></tr></table></figure>
<p><img src=".%5Cimg%5Cimage-20201130165236387.png" alt="image-20201130165236387"></p>
<h4 id="④在App根组件中添加占位符"><a href="#④在App根组件中添加占位符" class="headerlink" title="④在App根组件中添加占位符"></a>④在App根组件中添加占位符</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;router-view&gt;&lt;&#x2F;router-view&gt;</span><br></pre></td></tr></table></figure>
<p><img src=".%5Cimg%5Cimage-20201130165609482.png" alt="image-20201130165609482"></p>
<p>⑤重定向 将路劲  本身路径为 “<a target="_blank" rel="noopener" href="http://localhost:8080/#/%E2%80%9D">http://localhost:8080/#/”</a>  将放翁到默认路径时，自动跳转至登录界面路径  “<a target="_blank" rel="noopener" href="http://localhost:8080/#/login&quot;">http://localhost:8080/#/login&quot;</a></p>
<p><img src=".%5Cimg%5Cimage-20201130165736689.png" alt="image-20201130165736689"></p>
<h4 id="⑥添加登录样式"><a href="#⑥添加登录样式" class="headerlink" title="⑥添加登录样式"></a>⑥添加登录样式</h4><p><img src=".%5Cimg%5Cimage-20201130170402569.png" alt="image-20201130170402569"></p>
<p>发现缺少less-loader依赖 在 可视化界面中打开 找到依赖 点击“安装依赖”</p>
<p>找到less-loader 选择 开发依赖 进行安装</p>
<p><img src=".%5Cimg%5Cimage-20201130170322141.png" alt="image-20201130170322141"></p>
<p>再安装 less</p>
<p><img src=".%5Cimg%5Cimage-20201130170633588.png" alt="image-20201130170633588"></p>
<p>重启  —  任务  — serve  停止 —开始 —</p>
<p><img src=".%5Cimg%5Cimage-20201130170816005.png" alt="image-20201130170816005"></p>
<p><img src=".%5Cimg%5Cimage-20201130171957067.png" alt="image-20201130171957067"></p>
<h4 id="⑥配置全局样式表"><a href="#⑥配置全局样式表" class="headerlink" title="⑥配置全局样式表"></a>⑥配置全局样式表</h4><p><img src=".%5Cimg%5Cimage-20201130171108656.png" alt="image-20201130171108656"></p>
<p><img src=".%5Cimg%5Cimage-20201130171944040.png" alt="image-20201130171944040"></p>
<p>此时 body 和 login_container 是撑满全屏</p>
<p><img src=".%5Cimg%5Cimage-20201130172230512.png" alt="image-20201130172230512"></p>
<p>在样式中高度扩充为100%   height = 100%</p>
<p><img src=".%5Cimg%5Cimage-20201130172343464.png" alt="image-20201130172343464"></p>
<p><img src=".%5Cimg%5Cimage-20201130172414029.png" alt="image-20201130172414029"></p>
<h4 id="⑦添加登录界面窗口"><a href="#⑦添加登录界面窗口" class="headerlink" title="⑦添加登录界面窗口"></a>⑦添加登录界面窗口</h4><p><img src=".%5Cimg%5Cimage-20201130173115618.png" alt="image-20201130173115618"></p>
<p><img src=".%5Cimg%5Cimage-20201130173305178.png" alt="image-20201130173305178"></p>
<p>添加图片</p>
<p><img src=".%5Cimg%5Cimage-20201130174318974.png" alt="image-20201130174318974"></p>
<p>界面</p>
<p><img src=".%5Cimg%5Cimage-20201130174338278.png" alt="image-20201130174338278"></p>
<h4 id="⑨绘制登录表单区"><a href="#⑨绘制登录表单区" class="headerlink" title="⑨绘制登录表单区"></a>⑨绘制登录表单区</h4><p><img src=".%5Cimg%5Cimage-20201201094959257.png" alt="image-20201201094959257"></p>
<p><img src=".%5Cimg%5Cimage-20201201095039232.png" alt="image-20201201095039232"></p>
<p><img src=".%5Cimg%5Cimage-20201201095756781.png" alt="image-20201201095756781"></p>
<h4 id="⑩表单的数据绑定"><a href="#⑩表单的数据绑定" class="headerlink" title="⑩表单的数据绑定"></a>⑩表单的数据绑定</h4><p>通过    :model 来绑定数据对象   通过v-model来绑定对象的属性   </p>
<p>在密码一栏中 加入 type = “password” 来将密码变为隐藏</p>
<p><img src=".%5Cimg%5Cimage-20201201100413946.png" alt="image-20201201100413946"></p>
<h4 id="表单验证规则"><a href="#表单验证规则" class="headerlink" title="表单验证规则"></a>表单验证规则</h4><p>:rules= “ loginFormRules ” 通过  :rules  来绑定一个验证规则   prop来绑定规则</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">required : true   必填项</span><br><span class="line">message:        错误消息</span><br><span class="line">trigger: &#39;blur&#39;     鼠标失去焦点触发验证</span><br><span class="line">min : 3 , max: 5,    长度在 3 到 5 个字符</span><br></pre></td></tr></table></figure>
<p><img src=".%5Cimg%5Cimage-20201201104002530.png" alt="image-20201201104002530"></p>
<h4 id="重制表单"><a href="#重制表单" class="headerlink" title="重制表单"></a>重制表单</h4><p><strong>resetFields    对整个表单进行重置，将所有字段值重置为初始值并移除校验结果</strong></p>
<p>获取表单的实例对象  ref = “loginFormRef”  通过点击事件 来实现 重置  </p>
<p>$refs  可以看到 定义的实例对象</p>
<p><img src=".%5Cimg%5Cimage-20201201105526128.png" alt="image-20201201105526128"></p>
<h4 id="登录预校验"><a href="#登录预校验" class="headerlink" title="登录预校验"></a>登录预校验</h4><p>validate    </p>
<p>对整个表单进行校验的方法，参数为一个回调函数。该回调函数会在校验结束后被调用，并传入两个参数：是否校验成功和未通过校验的字段。若不传入回调函数，则会返回一个 promise    </p>
<p>Function(callback: Function(boolean, object))</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 登录  先获取表单的引用对象，拿着这个引用对象来调用validate 表单的校验函数  valid形参布尔值</span><br><span class="line">   login () &#123;</span><br><span class="line">     this.$refs.loginFormRef.validate((valid) &#x3D;&gt; &#123;</span><br><span class="line">       console.log(valid)</span><br><span class="line">     &#125;)</span><br></pre></td></tr></table></figure>
<h4 id="登录接口"><a href="#登录接口" class="headerlink" title="登录接口"></a>登录接口</h4><p>在main 中 </p>
<blockquote>
<p>引入 axios   import axios from ‘axios’</p>
<p>挂在 Vue 原型的属性 $http   Vue.prototype.$http = axios</p>
<p>设置请求的根路径  axios.defaults.baseURL = ‘<a target="_blank" rel="noopener" href="http://127.0.0.1:8888/api/private/v1&#39;">http://127.0.0.1:8888/api/private/v1&#39;</a></p>
</blockquote>
<p><img src=".%5Cimg%5Cimage-20201201111405630.png" alt="image-20201201111405630"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201112602650.png" alt="image-20201201112602650"></p>
<h5 id="出现-promise-时-要加上-await-和-async"><a href="#出现-promise-时-要加上-await-和-async" class="headerlink" title="出现 promise 时 要加上 await 和 async"></a>出现 promise 时 要加上 await 和 async</h5><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201112540898.png" alt="image-20201201112540898"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201113120148.png" alt="image-20201201113120148"></p>
<p>效果如下图 ，注意要 先运行接口</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201125925719.png" alt="image-20201201125925719"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201130213687.png" alt="image-20201201130213687"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201131009537.png" alt="image-20201201131009537"></p>
<h4 id="弹窗"><a href="#弹窗" class="headerlink" title="弹窗"></a>弹窗</h4><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201132626668.png" alt="image-20201201132626668"></p>
<h4 id="登陆成功-保存-token-跳转页面"><a href="#登陆成功-保存-token-跳转页面" class="headerlink" title="登陆成功 保存 token 跳转页面"></a>登陆成功 保存 token 跳转页面</h4><blockquote>
<p>// 1. 将登录成功之后的 token ，保存到客户端的 sessionStorage 中 （ sessionStorage 是会话时的存储   localStorage 是持久化的存储)<br>//   1.1 项目中除了登录之外的其他API接口 ， 必须在在登录之后才能访问<br>//   1.2 token 只应在当前网站打开期间生效， 所以将 token 保存在 sessionStorage中<br>console.log(res)<br>window.sessionStorage.setItem(‘token’, res.data.token)<br>// 2. 通过编程式导航跳转到后台主页，路由地址时 /home</p>
</blockquote>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201140849333.png" alt="image-20201201140849333"></p>
<h4 id="路由导航守卫控制访问权限"><a href="#路由导航守卫控制访问权限" class="headerlink" title="路由导航守卫控制访问权限"></a>路由导航守卫控制访问权限</h4><p>如果用户没有登录，但是直接通过url 访问特定页面，需要重新导航到登录页面。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 为路由对象，添加 beforeEach 导航守卫   </span><br><span class="line">&#x2F;&#x2F; to代表将要访问的路径 from代表从哪个页面跳转过来 </span><br><span class="line">&#x2F;&#x2F; next函数代表放行 next() 放行 next(&#39;&#x2F;login&#39;) 强制跳转</span><br><span class="line">router.beforeEach((to, from, next) &#x3D;&gt; &#123;</span><br><span class="line">&#x2F;&#x2F; 如果用户访问的登录页，直接放行</span><br><span class="line">  if (to.path &#x3D;&#x3D;&#x3D; &#39;&#x2F;login&#39;) return next()</span><br><span class="line">  &#x2F;&#x2F; 从sessionStorage 中获取到 保存的 token 值</span><br><span class="line">  const tokenStr &#x3D; window.sessionStorage.getItem(&#39;token&#39;)</span><br><span class="line">  &#x2F;&#x2F; 没有token，强制跳转到登录页</span><br><span class="line">  if (!tokenStr) return next(&#39;&#x2F;login&#39;)</span><br><span class="line">  next()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="登录-gt-退出"><a href="#登录-gt-退出" class="headerlink" title="登录-&gt;退出"></a>登录-&gt;退出</h4><p>退出功能实现原理</p>
<p>基于token 的方式实现退出比较简单，只需要销毁本地的 token 即可。 这样，后续的请求就不会携带 token ，必须重新登录生成一个新的 token 之后才可以访问页面</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 清空token</span><br><span class="line">window.seesionStorage.clear()</span><br><span class="line">&#x2F;&#x2F; 跳转到登录页</span><br><span class="line">this.$router.push(&#39;&#x2F;login&#39;)</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201144105759.png" alt="image-20201201144105759"></p>
<h6 id="若出现错误-双引号-和-分号的错误-以及-括号的错误"><a href="#若出现错误-双引号-和-分号的错误-以及-括号的错误" class="headerlink" title="若出现错误 双引号 和 分号的错误  以及 括号的错误"></a>若出现错误 双引号 和 分号的错误  以及 括号的错误</h6><p>在根目录下创建     .prettierrc 文件 </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">	&quot;semi&quot; : false,        取消分号</span><br><span class="line">	&quot;singleQuote&quot; : true	用单引号表示字符串</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>若出现 小括号之前需要空格  在 .eslintrc.js 中 添加</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#39;space-before-function-paren&#39;: 0    &#x2F;&#x2F;禁用</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201145036209.png" alt="image-20201201145036209"></p>
<h4 id="上传至gitee"><a href="#上传至gitee" class="headerlink" title="上传至gitee"></a>上传至gitee</h4><p>先 commit</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201151448610.png" alt="image-20201201151448610"></p>
<p>再编写上传的信息</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201151527672.png" alt="image-20201201151527672"></p>
<p>再push一下， 就可以推送</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201151640485.png" alt="image-20201201151640485"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201151714147.png" alt="image-20201201151714147"></p>
<p>若要合并到主支上</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">git checkout master    &#x2F;&#x2F;先转到主支</span><br><span class="line">git merge login        &#x2F;&#x2F;从支杆上合并过来</span><br><span class="line">git push               &#x2F;&#x2F;上传到 gitee中</span><br><span class="line">--------------</span><br><span class="line">git push -u origin login  &#x2F;&#x2F;若云端没有login分支 执行此</span><br></pre></td></tr></table></figure>
<h4 id="主页布局"><a href="#主页布局" class="headerlink" title="主页布局"></a>主页布局</h4><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &lt;el-container class&#x3D;&quot;home-container&quot;&gt;</span><br><span class="line">    &lt;!--    头部区域--&gt;</span><br><span class="line">    &lt;el-header&gt;Header</span><br><span class="line">      &lt;el-button type&#x3D;&quot;info&quot; @click&#x3D;&quot;logout&quot;&gt; 退出&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;&#x2F;el-header&gt;</span><br><span class="line">    &lt;!--    页面主体区域--&gt;</span><br><span class="line">    &lt;el-container&gt;</span><br><span class="line">      &lt;!--      侧边栏--&gt;</span><br><span class="line">      &lt;el-aside width&#x3D;&quot;200px&quot;&gt;Aside&lt;&#x2F;el-aside&gt;</span><br><span class="line">      &lt;!--右侧内容主体--&gt;</span><br><span class="line">      &lt;el-main&gt;Main&lt;&#x2F;el-main&gt;</span><br><span class="line">    &lt;&#x2F;el-container&gt;</span><br><span class="line">  &lt;&#x2F;el-container&gt;</span><br><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">.home-container&#123;</span><br><span class="line">  height: 100%;</span><br><span class="line">&#125;</span><br><span class="line">.el-header&#123;</span><br><span class="line">  background-color: #373d41;</span><br><span class="line">&#125;</span><br><span class="line">.el-aside&#123;</span><br><span class="line">  background-color: #333744;</span><br><span class="line">&#125;</span><br><span class="line">.el-main&#123;</span><br><span class="line">  background-color: #eaedf1;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201154742862.png" alt="image-20201201154742862"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201160201701.png" alt="image-20201201160201701"></p>
<h5 id="①头部布局"><a href="#①头部布局" class="headerlink" title="①头部布局"></a>①头部布局</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--    头部区域--&gt;</span><br><span class="line"> &lt;el-header&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">     &lt;img src&#x3D;&quot;..&#x2F;assets&#x2F;shop.png&quot; &gt;</span><br><span class="line">     &lt;span&gt;XX管理系统&lt;&#x2F;span&gt;</span><br><span class="line">   &lt;&#x2F;div&gt;</span><br><span class="line">   &lt;el-button type&#x3D;&quot;info&quot; @click&#x3D;&quot;logout&quot;&gt; 退出&lt;&#x2F;el-button&gt;</span><br><span class="line"> &lt;&#x2F;el-header&gt;</span><br></pre></td></tr></table></figure>
<p>样式</p>
<figure class="highlight less"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.el-header</span>&#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#373d41</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line">  <span class="attribute">justify-content</span>: space-between; <span class="comment">// 左右贴边对齐</span></span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">0</span>; <span class="comment">//左侧空白为 0</span></span><br><span class="line">  <span class="attribute">align-items</span>: center;  <span class="comment">// 按钮居中</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;   <span class="comment">//文字颜色</span></span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  &gt;<span class="selector-tag">div</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;  <span class="comment">// 按钮居中</span></span><br><span class="line">    <span class="selector-tag">img</span>&#123;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">52px</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="selector-tag">span</span>&#123;</span><br><span class="line">      margin-left: 15px;  /本间距</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201161925498.png" alt="image-20201201161925498"></p>
<h5 id="②左侧菜单布局"><a href="#②左侧菜单布局" class="headerlink" title="②左侧菜单布局"></a>②左侧菜单布局</h5><p>菜单分为两级，并且可以折叠</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-menu&gt;</span><br><span class="line">    &lt;el-submenu&gt;</span><br><span class="line">        &lt;!-- 这个 template 是一级菜单的内容模板--&gt;</span><br><span class="line">        &lt;i class&#x3D;&quot;el-icon-menu&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">        &lt;span&gt;一级菜单&lt;&#x2F;span&gt;</span><br><span class="line">         &lt;!-- 在一级菜单中，可以嵌套二级菜单--&gt;</span><br><span class="line">        &lt;el-menu-item&gt;</span><br><span class="line">            &lt;i class&#x3D;&quot;el-icon-menu&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">            &lt;span slot&#x3D;&quot;title&quot;&gt;二级菜单&lt;&#x2F;span&gt;</span><br><span class="line">        &lt;&#x2F;el-menu-item&gt;</span><br><span class="line">    &lt;&#x2F;el-submenu&gt;</span><br><span class="line">&lt;&#x2F;el-menu&gt;</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201163639482.png" alt="image-20201201163639482"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201163618447.png" alt="image-20201201163618447"></p>
<h5 id="③通过接口获取菜单数据"><a href="#③通过接口获取菜单数据" class="headerlink" title="③通过接口获取菜单数据"></a>③通过接口获取菜单数据</h5><p>通过axios 请求拦截器添加 token , 确保拥有获取数据的权限</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &#x2F;&#x2F; axios 请求拦截</span><br><span class="line">axios.interceptors.request.use(config &#x3D;&gt; &#123;</span><br><span class="line">&#x2F;&#x2F; 为请求头对象， 添加Token 验证的 Authorization 字段</span><br><span class="line">	config.headers.Authorization &#x3D; window.sessionStorage.getItem(&#39;token&#39;)</span><br><span class="line">	return config</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>登录时发送的请求 使得 Authorization 第一次没有颁发令牌</p>
<p>Authorization = null</p>
<p>但当进入页面后进行其他的操作时 ，Authorization = Token </p>
<p>同时服务器 也会再次 检查Authorization 这个值是否符合要求</p>
<h5 id="④发起请求获取菜单一栏"><a href="#④发起请求获取菜单一栏" class="headerlink" title="④发起请求获取菜单一栏"></a>④发起请求获取菜单一栏</h5><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201172027444.png" alt="image-20201201172027444"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201172052650.png" alt="image-20201201172052650"></p>
<p>⑤渲染左侧菜单栏</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--  v-for 循环遍历的时候，应该加上唯一的 key 每条数据都有唯一的key --&gt;</span><br><span class="line">&lt;!--index 本身是表示菜单为唯一 而 id 是每个菜单唯一的属性 因此 加上动态 item.id| 但item.id为数值 index此为字符串 需要加上 空      --&gt;</span><br></pre></td></tr></table></figure>
<p>(<img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201174150257.png" alt="image-20201201174150257"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201173753776.png" alt="image-20201201173753776"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201201173815526.png" alt="image-20201201173815526"></p>
<h5 id="⑤菜单栏图标修改"><a href="#⑤菜单栏图标修改" class="headerlink" title="⑤菜单栏图标修改"></a>⑤菜单栏图标修改</h5><p>首先添加字体图标的样式 在全局中</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202110816215.png" alt="image-20201202110816215"></p>
<p>每个菜单都有 唯一ID  v-for=”item in menulist”   即 item.id 为唯一ID</p>
<p>父菜单中暂时从elemetUI没有找到合适，可以采用添加 fonts 样式来添加， 在 data中添加 定义一个iconsObj 对象 指向一个对象</p>
<p>以item.id 为唯一id 来 绑定 图标  再添加图标和字体的间距</p>
<p>子菜单的图标可以 从 elementUI 中找到类似图标 </p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202110850481.png" alt="image-20201202110850481"></p>
<h5 id="⑥菜单一栏只展开一个子菜单"><a href="#⑥菜单一栏只展开一个子菜单" class="headerlink" title="⑥菜单一栏只展开一个子菜单"></a>⑥菜单一栏只展开一个子菜单</h5><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>可选值</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>unique-opened</td>
<td>是否只保持一个子菜单的展开</td>
<td>boolean</td>
<td>—</td>
<td>false</td>
</tr>
</tbody></table>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202132039250.png" alt="image-20201202132039250"></p>
<p>为子菜单添加样式 与 父级菜单对齐</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202132143325.png" alt="image-20201202132143325"></p>
<h5 id="⑦按钮折叠"><a href="#⑦按钮折叠" class="headerlink" title="⑦按钮折叠"></a>⑦按钮折叠</h5><p>传参数 就是属性绑定 前面就是 : 不加的话就是字符串  :collapse = “false”</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">说明</th>
<th align="left">类型</th>
<th align="left">可选值</th>
<th align="left">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">collapse</td>
<td align="left">是否水平折叠收起菜单（仅在 mode 为 vertical 时可用）</td>
<td align="left">boolean</td>
<td align="left">—</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">collapse-transition</td>
<td align="left">是否开启折叠动画</td>
<td align="left">boolean</td>
<td align="left">—</td>
<td align="left">true</td>
</tr>
</tbody></table>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202134613188.png" alt="image-20201202134613188"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &lt;el-aside :width&#x3D;&quot;isCollapse ? &#39;64px&#39; : &#39;200px&#39;&quot;&gt;  &#x2F;&#x2F;动态改变 侧边栏的 宽度</span><br><span class="line">        &lt;!--        侧边栏菜单区--&gt;</span><br><span class="line">        &lt;div class&#x3D;&quot;toggle-button&quot; @click&#x3D;&quot;toggleCollapse&quot;&gt;|||&lt;&#x2F;div&gt;</span><br><span class="line">        &lt;el-menu</span><br><span class="line">          background-color&#x3D;&quot;#333744&quot;</span><br><span class="line">          text-color&#x3D;&quot;#fff&quot;</span><br><span class="line">          active-text-color&#x3D;&quot;#409EFF&quot;</span><br><span class="line">          :collapse&#x3D;&quot;isCollapse&quot;      &#x2F;&#x2F; 加 : 是为了绑定属性 否则就是 字符串 </span><br><span class="line">          :collapse-transition &#x3D; &quot;false&quot;   &#x2F;&#x2F; 取消动画效果</span><br><span class="line">          unique-opened &gt;</span><br><span class="line">------------------------</span><br><span class="line"> &#x2F;&#x2F; 是否折叠</span><br><span class="line">      isCollapse: false</span><br><span class="line">-----------------------------</span><br><span class="line">  &#x2F;&#x2F; 点击按钮，切换菜单的折叠与展开</span><br><span class="line">    toggleCollapse() &#123;</span><br><span class="line">      this.isCollapse &#x3D; !this.isCollapse</span><br><span class="line">    &#125;</span><br><span class="line">    ------------------------</span><br><span class="line">.toggle-button&#123;</span><br><span class="line">  background-color: #4A5064;</span><br><span class="line">  font-size: 10px;</span><br><span class="line">  line-height: 24px;</span><br><span class="line">  color: #fff;</span><br><span class="line">  text-align: center;</span><br><span class="line">  &#x2F;&#x2F; 字体间距</span><br><span class="line">  letter-spacing: 0.2em;</span><br><span class="line">  &#x2F;&#x2F; 小手</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202134103127.png" alt="image-20201202134103127"></p>
<h4 id="首页路由的重定向"><a href="#首页路由的重定向" class="headerlink" title="首页路由的重定向"></a>首页路由的重定向</h4><h5 id="思路："><a href="#思路：" class="headerlink" title="思路："></a>思路：</h5><p>登陆成功 先展示 欢迎界面</p>
<p>定义 WelCome 的组件 在 Home 页面中 Main 的这个位置 放一个路由的占位符 </p>
<p>将Welcome的这个路由设置为 home路由 的子路由 </p>
<p>这样就能在home 路由中嵌套 WelCome的组件</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202135726180.png" alt="image-20201202135726180"></p>
<h5 id="①定义-Welcome组件"><a href="#①定义-Welcome组件" class="headerlink" title="①定义 Welcome组件"></a>①定义 Welcome组件</h5><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202140802583.png" alt="image-20201202140802583"></p>
<h5 id="②二级菜单改为路由链接"><a href="#②二级菜单改为路由链接" class="headerlink" title="②二级菜单改为路由链接"></a>②二级菜单改为路由链接</h5><table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">说明</th>
<th align="left">类型</th>
<th align="left">可选值</th>
<th align="left">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">router</td>
<td align="left">是否使用 vue-router 的模式，启用该模式会在激活导航时以 index 作为 path 进行路由跳转</td>
<td align="left">boolean</td>
<td align="left">—</td>
<td align="left">false</td>
</tr>
</tbody></table>
<p>如果为某一值重置为 true 时 可以简写 ，直接写 router  开启路由</p>
<p>激活导航时是以 index 做为path 路由 跳转  path: “users” 没有斜线 ”/“  因此在设置的时候手动加”/“</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202143659540.png" alt="image-20201202143659540"></p>
<p>‘</p>
<h4 id="用户管理-用户列表"><a href="#用户管理-用户列表" class="headerlink" title="用户管理-用户列表"></a>用户管理-用户列表</h4><h5 id="①创建Users组件"><a href="#①创建Users组件" class="headerlink" title="①创建Users组件"></a>①创建Users组件</h5><p>导入全局 – &gt;</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202145943112.png" alt="image-20201202145943112"></p>
<h5 id="②二级菜单被选中时，高亮"><a href="#②二级菜单被选中时，高亮" class="headerlink" title="②二级菜单被选中时，高亮"></a>②二级菜单被选中时，高亮</h5><p>高亮某以子菜单时 将对应的菜单的 index 值 赋值 为 default-active</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">说明</th>
<th align="left">类型</th>
<th align="left">可选值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">default-active</td>
<td align="left">当前激活菜单的 index</td>
<td align="left">string</td>
<td align="left">—</td>
</tr>
</tbody></table>
<p>思路：</p>
<p>在每次点击子菜单的时候，把对应的地址，保存到sessionStroge</p>
<p>当刷新页面的时候，从sessionStroge中取出 然后动态的 赋值 给 </p>
<p>el-menu 里面的 default-active = “  值  “</p>
<p>首先给二级菜单 el-menu-item 中添加 点击事件  保存导航里的状态-</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202152503432.png" alt="image-20201202152503432"></p>
<p>点击事件，保存激活状态</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202152520456.png" alt="image-20201202152520456"></p>
<p>在data 中定义一个数据 保存 激活时的链接</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202152630039.png" alt="image-20201202152630039"></p>
<p>组件被创建的时候肯定会 运行 生命周期 create</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202153138111.png" alt="image-20201202153138111"></p>
<p>在点击不同列表时，应该需要重新赋值</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202153305327.png" alt="image-20201202153305327"></p>
<h5 id="③绘制用户列表基本UI结构"><a href="#③绘制用户列表基本UI结构" class="headerlink" title="③绘制用户列表基本UI结构"></a>③绘制用户列表基本UI结构</h5><h6 id="添加面包屑"><a href="#添加面包屑" class="headerlink" title="添加面包屑"></a>添加面包屑</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">在 Users.Vue 中添加   ---- 别忘了添加 按需导入 element.js</span><br><span class="line"> &lt;!-- 面包屑导航区--&gt;</span><br><span class="line">    &lt;el-breadcrumb separator-class&#x3D;&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to&#x3D;&quot;&#123; path: &#39;&#x2F;home&#39; &#125;&quot;&gt;首页&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;用户管理&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;用户列表&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">    &lt;&#x2F;el-breadcrumb&gt;</span><br><span class="line"></span><br><span class="line">.el-breadcrumb&#123;</span><br><span class="line">    margin-bottom: 15px;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">&#125;</span><br><span class="line">.el-card&#123;</span><br><span class="line">    box-shadow: 0 1px 1px rgba(0,0,0,0.15) !important;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202155940400.png" alt="image-20201202155940400"></p>
<h6 id="添加卡片-搜索与添加栏"><a href="#添加卡片-搜索与添加栏" class="headerlink" title="添加卡片 搜索与添加栏"></a>添加卡片 搜索与添加栏</h6><p>分栏之间存在间隔</p>
<p>整个一行有24个格子  :span= 6 来表示占了6个格子  每一格之间的距离用:gutter=”20”来指定</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &lt;!--卡片视图区   --&gt;</span><br><span class="line">    &lt;el-card &gt;</span><br><span class="line">&lt;!--      123--&gt;</span><br><span class="line">      &lt;!-- 搜索与添加区域   --&gt;</span><br><span class="line">      &lt;el-row :gutter&#x3D;&quot;20&quot;&gt;  &#x2F;&#x2F;栅格布局</span><br><span class="line">        &lt;el-col :span&#x3D;&quot;8&quot;&gt;</span><br><span class="line">          &lt;el-input placeholder&#x3D;&quot;请输入内容&quot; &gt;</span><br><span class="line">            &lt;el-button slot&#x3D;&quot;append&quot; icon&#x3D;&quot;el-icon-search&quot;&gt;&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;&#x2F;el-input&gt;</span><br><span class="line">        &lt;&#x2F;el-col&gt;</span><br><span class="line">        &lt;el-col :span&#x3D;&quot;4&quot;&gt;</span><br><span class="line">          &lt;el-button type&#x3D;&quot;primary&quot;&gt;添加用户&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;el-col&gt;</span><br><span class="line">      &lt;&#x2F;el-row&gt;</span><br><span class="line">    &lt;&#x2F;el-card&gt;</span><br></pre></td></tr></table></figure>
<h6 id="获取用户列表数据"><a href="#获取用户列表数据" class="headerlink" title="获取用户列表数据"></a>获取用户列表数据</h6><ul>
<li>请求路径：users</li>
<li>请求方法：get</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>query</td>
<td>查询参数</td>
<td>可以为空</td>
</tr>
<tr>
<td>pagenum</td>
<td>当前页码</td>
<td>不能为空</td>
</tr>
<tr>
<td>pagesize</td>
<td>每页显示条数</td>
<td>不能为空</td>
</tr>
</tbody></table>
<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>totalpage</td>
<td>总记录数</td>
<td></td>
</tr>
<tr>
<td>pagenum</td>
<td>当前页码</td>
<td></td>
</tr>
<tr>
<td>users</td>
<td>用户数据集合</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">    &quot;data&quot;: &#123;</span><br><span class="line">        &quot;totalpage&quot;: 5,</span><br><span class="line">        &quot;pagenum&quot;: 4,</span><br><span class="line">        &quot;users&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;id&quot;: 25,</span><br><span class="line">                &quot;username&quot;: &quot;tige117&quot;,</span><br><span class="line">                &quot;mobile&quot;: &quot;18616358651&quot;,</span><br><span class="line">                &quot;type&quot;: 1,</span><br><span class="line">                &quot;email&quot;: &quot;tige112@163.com&quot;,</span><br><span class="line">                &quot;create_time&quot;: &quot;2017-11-09T20:36:26.000Z&quot;,</span><br><span class="line">                &quot;mg_state&quot;: true, &#x2F;&#x2F; 当前用户的状态</span><br><span class="line">                &quot;role_name&quot;: &quot;炒鸡管理员&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;获取成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">name: &#39;Users&#39;,</span><br><span class="line">  data() &#123;  &#x2F;&#x2F; 组件的数据</span><br><span class="line">    return &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取用户列表的参数对象</span><br><span class="line">      querryInfo: &#123;</span><br><span class="line">        querry: &#39;&#39;,</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        pagesize: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      userlist: [],</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;  &#x2F;&#x2F; 回调函数</span><br><span class="line">    this.getUserList   &#x2F;&#x2F;  先发起请求</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123; &#x2F;&#x2F;事件处理函数</span><br><span class="line">    async getUserList() &#123;  &#x2F;&#x2F; 定义函数</span><br><span class="line">      &#x2F;&#x2F; eslint-disable-next-line no-unused-vars</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;users&#39;, &#123; params: this.querryInfo &#125;)</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;获取用户列表失败&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.userlist &#x3D; res.data.users</span><br><span class="line">      this.total &#x3D; res.data.total</span><br><span class="line">      console.log(res)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<h6 id="渲染用户列表数据"><a href="#渲染用户列表数据" class="headerlink" title="渲染用户列表数据"></a>渲染用户列表数据</h6><p>&lt;el-table  :data  ==&gt; data便是为当前表格指定数据源  : 数据绑定</p>
<p>&lt;el-table-column 表示模板列 </p>
<p>label 指定这一列的标题 width 指定宽度 prop指定这一列所需要渲染的哪一个数据项</p>
<p>加边框 border   表格隔行变色 stripe</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-table :data&#x3D;&quot;userlist&quot; border stripe&gt;</span><br><span class="line">       &lt;el-table-column label&#x3D;&quot;姓名&quot; prop&#x3D;&quot;username&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">       &lt;el-table-column label&#x3D;&quot;邮箱&quot; prop&#x3D;&quot;email&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">       &lt;el-table-column label&#x3D;&quot;电话&quot; prop&#x3D;&quot;mobile&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">       &lt;el-table-column label&#x3D;&quot;角色&quot; prop&#x3D;&quot;role_name&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">       &lt;el-table-column label&#x3D;&quot;状态&quot; prop&#x3D;&quot;mg_state&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">       &lt;el-table-column label&#x3D;&quot;操作&quot; &gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">     &lt;&#x2F;el-table&gt;</span><br></pre></td></tr></table></figure>
<p>样式</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-class">.el-table</span>&#123;</span><br><span class="line">    margin-top: 15px;   // 表格与头部有间距</span><br><span class="line">    <span class="selector-tag">font-size</span>: 12<span class="selector-tag">px</span>;    // 字体大小</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为用户表格添加索引列</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202165156084.png" alt="image-20201202165156084"></p>
<h6 id="改造状态一列"><a href="#改造状态一列" class="headerlink" title="改造状态一列"></a>改造状态一列</h6><p>绑定<code>v-model</code>到一个<code>Boolean</code>类型的变量。可以使用<code>active-color</code>属性与<code>inactive-color</code>属性来设置开关的背景色。</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-switch  v-model&#x3D;&quot;value&quot;  active-color&#x3D;&quot;#13ce66&quot;  inactive-color&#x3D;&quot;#ff4949&quot;&gt; &lt;&#x2F;el-switch&gt;</span><br><span class="line">-----------------------------------</span><br><span class="line">  &lt;el-table-column label&#x3D;&quot;状态&quot; &gt;</span><br><span class="line">          &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">            &lt;!-- &lt;template v-slot:default&#x3D;&quot;scope&quot;&gt;--&gt;</span><br><span class="line">&lt;!--            &#123;&#123;scope.row&#125;&#125;  作用域插槽--&gt;</span><br><span class="line">            &lt;el-switch  v-model&#x3D;&quot;scope.row.mg_state&quot;&gt;</span><br><span class="line">            &lt;&#x2F;el-switch&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202170506613.png" alt="image-20201202170506613"></p>
<h6 id="自定义操作一列"><a href="#自定义操作一列" class="headerlink" title="自定义操作一列"></a>自定义操作一列</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &lt;el-table-column label&#x3D;&quot;操作&quot;  width&#x3D;&quot;180px&quot;&gt;</span><br><span class="line">          &lt;template&gt;</span><br><span class="line">&lt;!--            修改按钮--&gt;</span><br><span class="line">            &lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-edit&quot; size&#x3D;&quot;mini&quot; &gt;&lt;&#x2F;el-button&gt;</span><br><span class="line">&lt;!--            删除按钮--&gt;</span><br><span class="line">            &lt;el-button type&#x3D;&quot;danger&quot; icon&#x3D;&quot;el-icon-delete&quot; size&#x3D;&quot;mini&quot; &gt;&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;!--   分配角色按钮--&gt;</span><br><span class="line">            &lt;el-tooltip effect&#x3D;&quot;dark&quot; content&#x3D;&quot;分配角色&quot; placement&#x3D;&quot;top&quot; :enterable&#x3D;&quot;false&quot;&gt;</span><br><span class="line">              &lt;el-button type&#x3D;&quot;warning&quot; icon&#x3D;&quot;el-icon-setting&quot; size&#x3D;&quot;mini&quot; &gt;&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;&#x2F;el-tooltip&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>类型</th>
<th>可选值</th>
<th>默认值</th>
</tr>
</thead>
<tbody><tr>
<td>enterable</td>
<td>鼠标是否可进入到 tooltip 中</td>
<td>Boolean</td>
<td>—</td>
<td>true</td>
</tr>
</tbody></table>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202172507521.png" alt="image-20201202172507521"></p>
<h6 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h6><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201202174057420.png" alt="image-20201202174057420"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--      分页区域--&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">        @size-change&#x3D;&quot;handleSizeChange&quot;</span><br><span class="line">        @current-change&#x3D;&quot;handleCurrentChange&quot;</span><br><span class="line">        :current-page&#x3D;&quot;querryInfo.pagenum&quot;   &#x2F;&#x2F; 当前的页数</span><br><span class="line">        :page-sizes&#x3D;&quot;[1, 2, 5, 10]&quot;</span><br><span class="line">        :page-size&#x3D;&quot;querryInfo.pagesize&quot;   &#x2F;&#x2F; 当前每页显示多少条数据</span><br><span class="line">        layout&#x3D;&quot;total, sizes, prev, pager, next, jumper&quot;   &#x2F;&#x2F; 布局&#x3D;&gt;  共X条 显示多少页 此页 下一页 前往X页</span><br><span class="line">        :total&#x3D;&quot;total&quot;&gt;</span><br><span class="line">      &lt;&#x2F;el-pagination&gt;</span><br><span class="line">--------------------------------------</span><br><span class="line">      data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取用户列表的参数对象</span><br><span class="line">      querryInfo: &#123;</span><br><span class="line">        querry: &#39;&#39;,</span><br><span class="line">        &#x2F;&#x2F; 当前的页数</span><br><span class="line">        pagenum: 1,</span><br><span class="line">        &#x2F;&#x2F; 当前每页显示多少条数据</span><br><span class="line">        pagesize: 2</span><br><span class="line">      &#125;,</span><br><span class="line">      userlist: [],</span><br><span class="line">      total: 0</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"> --------------------------------------</span><br><span class="line">       &#x2F;&#x2F; 监听 pageSize 改变</span><br><span class="line">    handleSizeChange(newSize) &#123;</span><br><span class="line">      &#x2F;&#x2F; console.log(newSize)</span><br><span class="line">      this.querryInfo.pagesize &#x3D; newSize</span><br><span class="line">      &#x2F;&#x2F; 重新获取数据</span><br><span class="line">      this.getUserList()</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F;  监听表示页码值发生改变</span><br><span class="line">    handleCurrentChange(newPage) &#123;</span><br><span class="line">      console.log(newPage)</span><br><span class="line">      this.querryInfo.pagenum &#x3D; newPage</span><br><span class="line">      &#x2F;&#x2F; 重新获取数据</span><br><span class="line">      this.getUserList()</span><br><span class="line">    &#125;</span><br><span class="line">--------------------------</span><br><span class="line">.el-pagination&#123;</span><br><span class="line">    margin-top: 15px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="用户状态修改"><a href="#用户状态修改" class="headerlink" title="用户状态修改"></a>用户状态修改</h6><p>将用户状态的更改同步保存至数据库中</p>
<p>1.监听到 switch开关状态的改变，从而拿到最新的状态</p>
<p>2.调用对应的API接口，把最新的状态保存到数据库中</p>
<table>
<thead>
<tr>
<th align="left">事件名称</th>
<th align="left">说明</th>
<th align="left">回调参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">change</td>
<td align="left">switch 状态发生变化时的回调函数</td>
<td align="left">新状态的值</td>
</tr>
</tbody></table>
<p>API接口</p>
<ul>
<li>请求路径：users/:uId/state/:type</li>
<li>请求方法：put</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>uId</td>
<td>用户 ID</td>
<td>不能为空<code>携带在url中</code></td>
</tr>
<tr>
<td>type</td>
<td>用户状态</td>
<td>不能为空<code>携带在url中</code>，值为 true 或者 false</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="number">566</span>,</span><br><span class="line">    <span class="attr">&quot;rid&quot;</span>: <span class="number">30</span>,</span><br><span class="line">    <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;mobile&quot;</span>: <span class="string">&quot;123456&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;bb@itcast.com&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;mg_state&quot;</span>: <span class="number">0</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">&quot;meta&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;msg&quot;</span>: <span class="string">&quot;设置状态成功&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="number">200</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>通过 @change 来监听此时的 mg_state</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &lt;el-table-column label&#x3D;&quot;状态&quot; &gt;</span><br><span class="line">          &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">&lt;!-- &#123;&#123;scope.row&#125;&#125;  作用域插槽--&gt;</span><br><span class="line">            &lt;el-switch  v-model&#x3D;&quot;scope.row.mg_state&quot; @change&#x3D;&quot;userStateChange(scope.row)&quot;&gt;</span><br><span class="line">            &lt;&#x2F;el-switch&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>
<p>调用监听的方法</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 监听switch 开关的状态</span><br><span class="line">   async userStateChange(userinfo) &#123;</span><br><span class="line">     console.log(userinfo)</span><br><span class="line">     const &#123; data: res &#125; &#x3D; await this.$http.put(&#96;users&#x2F;$&#123;userinfo.id&#125;&#x2F;state&#x2F;$&#123;userinfo.mg_state&#125; &#96;)</span><br><span class="line">     if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">       userinfo.mg_state &#x3D; !userinfo.mg_state</span><br><span class="line">       return this.$message.error(&#39;更新用户状态失败&#39;)</span><br><span class="line">     &#125;</span><br><span class="line">     this.$message.success(&#39;更新用户状态成功&#39;)</span><br><span class="line">     console.log(res)</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>
<h6 id="实现搜索框"><a href="#实现搜索框" class="headerlink" title="实现搜索框"></a>实现搜索框</h6><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201203104248589.png" alt="image-20201203104248589"></p>
<p>加入绑定事件 v-model= “querryinfo.querry”</p>
<p>加入点击事件 @click=”getUserList”</p>
<p>给输入框加入清空功能</p>
<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">说明</th>
<th align="left">类型</th>
<th align="left">可选值</th>
<th align="left">默认值</th>
</tr>
</thead>
<tbody><tr>
<td align="left">clearable</td>
<td align="left">是否可清空</td>
<td align="left">boolean</td>
<td align="left">—</td>
<td align="left">false</td>
</tr>
</tbody></table>
<p>事件</p>
<table>
<thead>
<tr>
<th align="left">事件名称</th>
<th align="left">说明</th>
<th align="left">回调参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">clear</td>
<td align="left">在点击由 <code>clearable</code> 属性生成的清空按钮时触发</td>
<td align="left">—</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-input placeholder&#x3D;&quot;请输入内容&quot;</span><br><span class="line">                    v-model&#x3D;&quot;querryInfo.query&quot;</span><br><span class="line">                    clearable</span><br><span class="line">                    @clear&#x3D;&quot;getUserList&quot;&gt;</span><br><span class="line">            &lt;el-button slot&#x3D;&quot;append&quot; icon&#x3D;&quot;el-icon-search&quot; @click&#x3D;&quot;getUserList&quot;&gt;&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;&#x2F;el-input&gt;</span><br></pre></td></tr></table></figure>
<h6 id="实现“添加用户”弹窗功能"><a href="#实现“添加用户”弹窗功能" class="headerlink" title="实现“添加用户”弹窗功能"></a>实现“添加用户”弹窗功能</h6><p>实现对话框的展示</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">title&#x3D;&quot;提示&quot;  &#x2F;&#x2F;标题</span><br><span class="line">:visible.sync&#x3D;&quot;addDialogVisible&quot;    &#x2F;&#x2F; 属性绑定 显示和隐藏</span><br></pre></td></tr></table></figure>
<p>代码    </p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;给按钮加上点击事件   addDialogVisible 为隐藏或显示 对话框</span><br><span class="line"> &lt;el-col :span&#x3D;&quot;4&quot;&gt;</span><br><span class="line">   &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;addDialogVisible &#x3D; true&quot;&gt;添加用户&lt;&#x2F;el-button&gt;</span><br><span class="line"> &lt;&#x2F;el-col&gt;</span><br><span class="line">------------------------------------------</span><br><span class="line"></span><br><span class="line">&lt;!--    添加用户的基本对话框  --&gt;</span><br><span class="line">      &lt;el-dialog</span><br><span class="line">        title&#x3D;&quot;提示&quot;</span><br><span class="line">        :visible.sync&#x3D;&quot;addDialogVisible&quot;</span><br><span class="line">        width&#x3D;&quot;30%&quot;&gt;</span><br><span class="line">&lt;!--        内容主体区--&gt;</span><br><span class="line">        &lt;span&gt;这是一段信息&lt;&#x2F;span&gt;</span><br><span class="line">&lt;!--        底部区域--&gt;</span><br><span class="line">        &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click&#x3D;&quot;addDialogVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;addDialogVisible &#x3D; false&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;span&gt;</span><br><span class="line">      &lt;&#x2F;el-dialog&gt;</span><br></pre></td></tr></table></figure>
<p>定义属性</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 控制添加用户的对话框的显示和隐藏</span><br><span class="line"> addDialogVisible: false</span><br></pre></td></tr></table></figure>
<h6 id="“添加用户”弹窗中显示表单"><a href="#“添加用户”弹窗中显示表单" class="headerlink" title="“添加用户”弹窗中显示表单"></a>“添加用户”弹窗中显示表单</h6><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201203112455897.png" alt="image-20201203112455897"></p>
<p><strong>:model 数据绑定对象      :rules数据验证规则对象     ref引用      label-width宽度</strong></p>
<p><strong>label指定名称 prop指定具体的检验规则</strong></p>
<p>v-model来进行数据的双向绑定  也就是说将数据 绑定到 addForm 中  输入的所有数据都绑定到addForm</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">内容主体区--&gt;</span><br><span class="line">     &lt;el-form  :model&#x3D;&quot;addForm&quot; :rules&#x3D;&quot;addFormRules&quot; ref&#x3D;&quot;addFormRef&quot; label-width&#x3D;&quot;80px&quot;&gt;</span><br><span class="line">       &lt;el-form-item label&#x3D;&quot;用户名称&quot; prop&#x3D;&quot;username&quot;&gt;</span><br><span class="line">         &lt;el-input v-model&#x3D;&quot;addForm.username&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">       &lt;&#x2F;el-form-item&gt;</span><br><span class="line">       &lt;el-form-item label&#x3D;&quot;密码&quot; prop&#x3D;&quot;password&quot;&gt;</span><br><span class="line">         &lt;el-input v-model&#x3D;&quot;addForm.password&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">       &lt;&#x2F;el-form-item&gt;</span><br><span class="line">       &lt;el-form-item label&#x3D;&quot;邮箱&quot; prop&#x3D;&quot;email&quot;&gt;</span><br><span class="line">         &lt;el-input v-model&#x3D;&quot;addForm.email&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">       &lt;&#x2F;el-form-item&gt;</span><br><span class="line">       &lt;el-form-item label&#x3D;&quot;手机&quot; prop&#x3D;&quot;mobile&quot;&gt;</span><br><span class="line">         &lt;el-input v-model&#x3D;&quot;addForm.mobile&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">       &lt;&#x2F;el-form-item&gt;</span><br><span class="line">     &lt;&#x2F;el-form&gt;</span><br></pre></td></tr></table></figure>
<p>绑定</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 添加用户的表单数据</span><br><span class="line">    addForm: &#123;</span><br><span class="line">      username: &#39;&#39;,</span><br><span class="line">      password: &#39;&#39;,</span><br><span class="line">      email: &#39;&#39;,</span><br><span class="line">      mobile: &#39;&#39;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 添加表单的验证规则对象</span><br><span class="line">    addFormRules: &#123;</span><br><span class="line">      username: [&#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &#39;请输入用户名&#39;,</span><br><span class="line">        trigger: &#39;blur&#39;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        min: 3,</span><br><span class="line">        max: 10,</span><br><span class="line">        message: &#39;用户名的长度在3到10个字符之间&#39;,</span><br><span class="line">        trigger: &#39;blur&#39;</span><br><span class="line">      &#125;</span><br><span class="line">      ],</span><br><span class="line">      password: [&#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &#39;请输入密码&#39;,</span><br><span class="line">        trigger: &#39;blur&#39;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        min: 6,</span><br><span class="line">        max: 15,</span><br><span class="line">        message: &#39;用户名的长度在6到15个字符之间&#39;,</span><br><span class="line">        trigger: &#39;blur&#39;</span><br><span class="line">      &#125;</span><br><span class="line">      ],</span><br><span class="line">      email: [&#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &#39;请输入邮箱&#39;,</span><br><span class="line">        trigger: &#39;blur&#39;</span><br><span class="line">      &#125;</span><br><span class="line">      ],</span><br><span class="line">      mobile: [&#123;</span><br><span class="line">        required: true,</span><br><span class="line">        message: &#39;请输入手机号&#39;,</span><br><span class="line">        trigger: &#39;blur&#39;</span><br><span class="line">      &#125;]</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h6 id="“添加用户”弹窗自定义手机-邮箱-正则验证"><a href="#“添加用户”弹窗自定义手机-邮箱-正则验证" class="headerlink" title="“添加用户”弹窗自定义手机/邮箱 - 正则验证"></a>“添加用户”弹窗自定义手机/邮箱 - 正则验证</h6><p>在 data 中 定义一个变量 等于一个 箭头函数  </p>
<p>箭头函数就是一个自定义校验规则  其形参中 有 </p>
<p>rule 验证规则   vule 验证的值   callback回调函数  </p>
<p>只要验证通过 就可以在 箭头函数中调用callback回调函数</p>
<p>如果调用失败提供一个Error对象 字符串</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201203135338493.png" alt="image-20201203135338493"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 验证邮箱的规则</span><br><span class="line">var checkEmail &#x3D; (rule, value, cb) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 验证邮箱的正则</span><br><span class="line">  const regEmail &#x3D; &#x2F;^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+&#x2F;</span><br><span class="line">  if (regEmail.test(value)) &#123;</span><br><span class="line">    &#x2F;&#x2F; 合法邮箱</span><br><span class="line">    return cb()</span><br><span class="line">  &#125;</span><br><span class="line">  cb(new Error(&#39;请输入合法的邮箱&#39;))</span><br><span class="line">&#125;</span><br><span class="line">&#x2F;&#x2F; 验证手机号的规则</span><br><span class="line">var checkMobile &#x3D; (rule, value, cb) &#x3D;&gt; &#123;</span><br><span class="line">  &#x2F;&#x2F; 验证手机号的正则</span><br><span class="line">  const regMoile &#x3D; &#x2F;^(0|86|17951)?(13[0-9]|15[0123456789]|17[678]|18[0-9]|14[57])[0-9]&#123;8&#125;$&#x2F;</span><br><span class="line">  if (regMoile.test(value)) &#123;</span><br><span class="line">    &#x2F;&#x2F; 合法手机号</span><br><span class="line">    return cb()</span><br><span class="line">  &#125;</span><br><span class="line">  cb(new Error(&#39;请输入合法的手机号&#39;))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>validator 指向自定义的检验规则</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">email: [&#123;</span><br><span class="line">  required: true,</span><br><span class="line">  message: &#39;请输入邮箱&#39;,</span><br><span class="line">  trigger: &#39;blur&#39;</span><br><span class="line">&#125;,</span><br><span class="line">&#123; validator: checkEmail, trigger: &#39;blur&#39; &#125;</span><br><span class="line">],</span><br><span class="line">mobile: [&#123;</span><br><span class="line">  required: true,</span><br><span class="line">  message: &#39;请输入手机号&#39;,</span><br><span class="line">  trigger: &#39;blur&#39;</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  validator: checkMobile, trigger: &#39;blur&#39;</span><br><span class="line">&#125;]</span><br></pre></td></tr></table></figure>
<h6 id="“添加用户”弹窗-重置数据"><a href="#“添加用户”弹窗-重置数据" class="headerlink" title="“添加用户”弹窗-重置数据"></a>“添加用户”弹窗-重置数据</h6><p>①监听对话框的关闭事件 @close</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--    添加用户的基本对话框  --&gt;</span><br><span class="line">      &lt;el-dialog</span><br><span class="line">        title&#x3D;&quot;添加用户&quot;</span><br><span class="line">        :visible.sync&#x3D;&quot;addDialogVisible&quot;</span><br><span class="line">        width&#x3D;&quot;30%&quot;</span><br><span class="line">        @close&#x3D;&quot;addDialogClosed&quot;&gt;</span><br></pre></td></tr></table></figure>
<p>②在关闭事件中重置表单</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 监听用户对话框关闭事件-&gt;表单ref引用，启动resetFields</span><br><span class="line">addDialogClosed() &#123;</span><br><span class="line">  this.$refs.addFormRef.resetFields()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th align="left">方法名</th>
<th align="left">说明</th>
<th align="left">参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">resetFields</td>
<td align="left">对整个表单进行重置，将所有字段值重置为初始值并移除校验结果</td>
<td align="left">—</td>
</tr>
</tbody></table>
<h6 id="“添加用户”弹窗-确定预校验事件"><a href="#“添加用户”弹窗-确定预校验事件" class="headerlink" title="“添加用户”弹窗-确定预校验事件"></a>“添加用户”弹窗-确定预校验事件</h6><p>点击“确定”按钮的时候 启动事件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;addUser&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">addUser() &#123;</span><br><span class="line">&#x2F;&#x2F; 拿到整个表单的引用  箭头函数valid</span><br><span class="line">  this.$refs.addFormRef.validate(async valid &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; console.log(valid)</span><br><span class="line">    &#x2F;&#x2F; eslint-disable-next-line no-useless-return</span><br><span class="line">    if (!valid) return</span><br><span class="line">    &#x2F;&#x2F; 可以发起用户的网络请求</span><br><span class="line">    const &#123; data: res &#125; &#x3D; await this.$http.post(&#39;users&#39;, this.addForm)</span><br><span class="line">    if (res.meta.status !&#x3D;&#x3D; 201) &#123;</span><br><span class="line">      this.$message.error(&#39;添加用户失败&#39;)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h6 id="“添加用户”弹窗-确定-用户添加成功"><a href="#“添加用户”弹窗-确定-用户添加成功" class="headerlink" title="“添加用户”弹窗-确定-用户添加成功"></a>“添加用户”弹窗-确定-用户添加成功</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 点击按钮， 添加新用户</span><br><span class="line">addUser() &#123;</span><br><span class="line">  this.$refs.addFormRef.validate(async valid &#x3D;&gt; &#123;</span><br><span class="line">    if (!valid) return</span><br><span class="line">    &#x2F;&#x2F; 可以发起用户的网络请求</span><br><span class="line">    const &#123; data: res &#125; &#x3D; await this.$http.post(&#39;users&#39;, this.addForm)</span><br><span class="line">    if (res.meta.status !&#x3D;&#x3D; 201) &#123;</span><br><span class="line">      this.$message.error(&#39;添加用户失败&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    this.$message.success(&#39;添加用户成功&#39;)</span><br><span class="line">    &#x2F;&#x2F; 隐藏对话框</span><br><span class="line">    this.addDialogVisible &#x3D; false</span><br><span class="line">    &#x2F;&#x2F; 重新获取数据列表</span><br><span class="line">    this.getUserList()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<table>
<thead>
<tr>
<th align="left">方法名</th>
<th align="left">说明</th>
<th align="left">参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">validate</td>
<td align="left">对整个表单进行校验的方法，参数为一个回调函数。该回调函数会在校验结束后被调用，并传入两个参数：是否校验成功和未通过校验的字段。若不传入回调函数，则会返回一个 promise</td>
<td align="left">Function(callback: Function(boolean, object))</td>
</tr>
</tbody></table>
<ul>
<li>请求路径：users</li>
<li>请求方法：post</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>username</td>
<td>用户名称</td>
<td>不能为空</td>
</tr>
<tr>
<td>password</td>
<td>用户密码</td>
<td>不能为空</td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
<td>可以为空</td>
</tr>
<tr>
<td>mobile</td>
<td>手机号</td>
<td>可以为空</td>
</tr>
</tbody></table>
<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 ID</td>
<td></td>
</tr>
<tr>
<td>rid</td>
<td>用户角色 ID</td>
<td></td>
</tr>
<tr>
<td>username</td>
<td>用户名</td>
<td></td>
</tr>
<tr>
<td>mobile</td>
<td>手机号</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">    &quot;data&quot;: &#123;</span><br><span class="line">        &quot;id&quot;: 28,</span><br><span class="line">        &quot;username&quot;: &quot;tige1200&quot;,</span><br><span class="line">        &quot;mobile&quot;: &quot;test&quot;,</span><br><span class="line">        &quot;type&quot;: 1,</span><br><span class="line">        &quot;openid&quot;: &quot;&quot;,</span><br><span class="line">        &quot;email&quot;: &quot;test@test.com&quot;,</span><br><span class="line">        &quot;create_time&quot;: &quot;2017-11-10T03:47:13.533Z&quot;,</span><br><span class="line">        &quot;modify_time&quot;: null,</span><br><span class="line">        &quot;is_delete&quot;: false,</span><br><span class="line">        &quot;is_active&quot;: false</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;用户创建成功&quot;,</span><br><span class="line">        &quot;status&quot;: 201</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="用户信息修改-弹出对话框"><a href="#用户信息修改-弹出对话框" class="headerlink" title="用户信息修改-弹出对话框"></a>用户信息修改-弹出对话框</h6><p>对编辑按钮绑定 事件@click=”showEditDialog()</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 修改按钮--&gt;</span><br><span class="line">&lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-edit&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;showEditDialog()&quot;&gt;&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<p>添加对话框 定义 隐藏和展示对话框的属性editDialogVisible</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">  &lt;!-- 修改用户的对话框--&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title&#x3D;&quot;修改用户&quot;</span><br><span class="line">      :visible.sync&#x3D;&quot;editDialogVisible&quot;</span><br><span class="line">      width&#x3D;&quot;50%&quot;&gt;</span><br><span class="line">      &lt;span&gt;这是一段信息&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">  &lt;el-button @click&#x3D;&quot;editDialogVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;editDialogVisible &#x3D; false&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">&lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-dialog&gt;</span><br></pre></td></tr></table></figure>
<p>在data中定义属性</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 控制修改用户对话框的显示与隐藏</span><br><span class="line">editDialogVisible: false</span><br></pre></td></tr></table></figure>
<p>编写点击事件的函数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 展示用户编辑的对话框</span><br><span class="line">async showEditDialog () &#123;</span><br><span class="line">  this.editDialogVisible &#x3D; true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="用户信息修改-弹出对话框-根据ID获取信息"><a href="#用户信息修改-弹出对话框-根据ID获取信息" class="headerlink" title="用户信息修改-弹出对话框-根据ID获取信息"></a>用户信息修改-弹出对话框-根据ID获取信息</h6><p> scope.row.id获取当前用户的id</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">修改按钮  scope.row.id获取当前用户的id--&gt;</span><br><span class="line">&lt;el-button type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-edit&quot; size&#x3D;&quot;mini&quot; @click&#x3D;&quot;showEditDialog(scope.row.id)&quot;&gt;&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<p>事件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">async showEditDialog (id) &#123;</span><br><span class="line">  &#x2F;&#x2F; console.log(id)</span><br><span class="line">  const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;users&#x2F;&#39; + id)</span><br><span class="line">  if (res.mate.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">    return this.$message.error(&#39;查询用户信息失败&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  this.editForm &#x3D; res.data   &#x2F;&#x2F; 将获取到的数据 放入自定义的对象中</span><br><span class="line">  this.editDialogVisible &#x3D; true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>定义</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 定义私有对象  查询到的用户信息对象</span><br><span class="line">editForm: &#123;&#125;</span><br></pre></td></tr></table></figure>
<p>API</p>
<ul>
<li>请求路径：users/:id</li>
<li>请求方法：get</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 ID</td>
<td>不能为空<code>携带在url中</code></td>
</tr>
</tbody></table>
<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 ID</td>
<td></td>
</tr>
<tr>
<td>role_id</td>
<td>角色 ID</td>
<td></td>
</tr>
<tr>
<td>mobile</td>
<td>手机号</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;data&quot;: &#123;</span><br><span class="line">        &quot;id&quot;: 503,</span><br><span class="line">        &quot;username&quot;: &quot;admin3&quot;,</span><br><span class="line">        &quot;role_id&quot;: 0,</span><br><span class="line">        &quot;mobile&quot;: &quot;00000&quot;,</span><br><span class="line">        &quot;email&quot;: &quot;new@new.com&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;查询成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="用户信息修改-弹出对话框-修改表单"><a href="#用户信息修改-弹出对话框-修改表单" class="headerlink" title="用户信息修改-弹出对话框-修改表单"></a>用户信息修改-弹出对话框-修改表单</h6><p>用户名不需要验证规则 不需要prop属性  input不可修改加上disabled</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 修改用户的对话框--&gt;</span><br><span class="line">&lt;el-dialog</span><br><span class="line">  title&#x3D;&quot;修改用户&quot;</span><br><span class="line">  :visible.sync&#x3D;&quot;editDialogVisible&quot;</span><br><span class="line">  width&#x3D;&quot;50%&quot;&gt;</span><br><span class="line">  &lt;el-form :model&#x3D;&quot;editForm&quot; :rules&#x3D;&quot;editFormRules&quot; ref&#x3D;&quot;editFormRef&quot; label-width&#x3D;&quot;70px&quot;&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;用户名&quot;&gt;</span><br><span class="line">      &lt;el-input v-model&#x3D;&quot;editForm.username&quot; disabled&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;邮箱&quot; prop&#x3D;&quot;email&quot;&gt;</span><br><span class="line">      &lt;el-input v-model&#x3D;&quot;editForm.email&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">    &lt;el-form-item label&#x3D;&quot;手机号&quot; prop&#x3D;&quot;mobile&quot;&gt;</span><br><span class="line">      &lt;el-input v-model&#x3D;&quot;editForm.mobile&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">    &lt;&#x2F;el-form-item&gt;</span><br><span class="line">  &lt;&#x2F;el-form&gt;</span><br></pre></td></tr></table></figure>




<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 修改表单的验证规则对象</span><br><span class="line">editFormRules: &#123;</span><br><span class="line">  email: [&#123;</span><br><span class="line">    required: true,</span><br><span class="line">    message: &#39;请输入用户邮箱&#39;,</span><br><span class="line">    trigger: &#39;blur&#39;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    validator: checkEmail, trigger: &#39;blur&#39;</span><br><span class="line">  &#125;],</span><br><span class="line">  mobile: [&#123;</span><br><span class="line">    required: true,</span><br><span class="line">    message: &#39;请输入用户手机号&#39;,</span><br><span class="line">    trigger: &#39;blur&#39;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    validator: checkMobile, trigger: &#39;blur&#39;</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="修改表单重置"><a href="#修改表单重置" class="headerlink" title="修改表单重置"></a>修改表单重置</h6><p>监听closed 再重置表单  @close=”editDialogClosed”&gt;  表示关闭表单时对表单内容做修改后并没有保存，而重置</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-dialog</span><br><span class="line">  title&#x3D;&quot;修改用户&quot;</span><br><span class="line">  :visible.sync&#x3D;&quot;editDialogVisible&quot;</span><br><span class="line">  width&#x3D;&quot;50%&quot;</span><br><span class="line">  @close&#x3D;&quot;editDialogClosed&quot;&gt;</span><br><span class="line">--------------------------</span><br><span class="line">   &#x2F;&#x2F; 监听修改用户对话框的关闭事件</span><br><span class="line">    editDialogClosed() &#123;</span><br><span class="line">      this.$refs.editFormRef.resetFields()</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>表单预校验  点击确定按钮 进入预校验状态 绑定@click</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;editUserInfo&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<p>修改表单事件函数</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 修改用户信息并提交校验成功返回true</span><br><span class="line">editUserInfo() &#123;</span><br><span class="line">  this.$refs.editFormRef.validate(valid &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; console.log(valid)</span><br><span class="line">    &#x2F;&#x2F; eslint-disable-next-line no-useless-return</span><br><span class="line">    if (!valid) return</span><br><span class="line">    &#x2F;&#x2F; 发起修改用户信息的数据请求</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="修改表单提交"><a href="#修改表单提交" class="headerlink" title="修改表单提交"></a>修改表单提交</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 修改用户信息并提交校验成功返回true</span><br><span class="line">editUserInfo() &#123;</span><br><span class="line">  this.$refs.editFormRef.validate(async valid &#x3D;&gt; &#123;</span><br><span class="line">    &#x2F;&#x2F; console.log(valid)</span><br><span class="line">    &#x2F;&#x2F; eslint-disable-next-line no-useless-return</span><br><span class="line">    if (!valid) return</span><br><span class="line">    &#x2F;&#x2F; 发起修改用户信息的数据请求</span><br><span class="line">    const &#123; data: res &#125; &#x3D; await this.$http.put(&#39;users&#x2F;&#39; + this.editForm.id, &#123;</span><br><span class="line">      email: this.editForm.email,      &#x2F;&#x2F;响应参数中需要获取两个值</span><br><span class="line">      mobile: this.editForm.mobile</span><br><span class="line">    &#125;)</span><br><span class="line">    if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">      return this.$message.error(&#39;更新用户信息失败!&#39;)</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F; 关闭对话框</span><br><span class="line">    this.editDialogVisible &#x3D; false</span><br><span class="line">    &#x2F;&#x2F; 刷新数据列表</span><br><span class="line">    this.getUserList()</span><br><span class="line">    &#x2F;&#x2F; 提示修改成功</span><br><span class="line">    this.$message.success(&#39;更新用户信息成功&#39;)</span><br><span class="line">  &#125;)</span><br></pre></td></tr></table></figure>
<p>API</p>
<ul>
<li>请求路径：users/:id</li>
<li>请求方法：put</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 id</td>
<td>不能为空 <code>参数是url参数:id</code></td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
<td>可以为空</td>
</tr>
<tr>
<td>mobile</td>
<td>手机号</td>
<td>可以为空</td>
</tr>
</tbody></table>
<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 ID</td>
<td></td>
</tr>
<tr>
<td>role_id</td>
<td>角色 ID</td>
<td></td>
</tr>
<tr>
<td>mobile</td>
<td>手机号</td>
<td></td>
</tr>
<tr>
<td>email</td>
<td>邮箱</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight plain"><figcaption><span>200表示成功，500表示失败 */</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;data&quot;: &#123;</span><br><span class="line">        &quot;id&quot;: 503,</span><br><span class="line">        &quot;username&quot;: &quot;admin3&quot;,</span><br><span class="line">        &quot;role_id&quot;: 0,</span><br><span class="line">        &quot;mobile&quot;: &quot;111&quot;,</span><br><span class="line">        &quot;email&quot;: &quot;123@123.com&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;更新成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="删除列表操作"><a href="#删除列表操作" class="headerlink" title="删除列表操作"></a>删除列表操作</h6><p>this.$confirm 执行弹出框，但是要先挂载才能够使用  </p>
<p>this代表当前组件实例  通过vue原型挂载的形式，对vue原型对象 挂在一个 $confirm 函数</p>
<p>这样每一个组件中都能访问到 $confirm 通过 .then 指定成功之后的操作 ，也可以通过.catch来指定取消之后的操作</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">import &#123; MessageBox &#125; from &#39;element-ui&#39;;</span><br><span class="line">Vue.prototype.$confirm &#x3D; MessageBox.confirm</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 根据id删除用户信息</span><br><span class="line">async removeUserById(id) &#123;</span><br><span class="line">  &#x2F;&#x2F; 弹框询问用户是否删除数据</span><br><span class="line">  const confirmResult &#x3D; await this.$confirm(&#39;此操作将永久删除该用户, 是否继续?&#39;, &#39;提示&#39;, &#123;</span><br><span class="line">    confirmButtonText: &#39;确定&#39;,</span><br><span class="line">    cancelButtonText: &#39;取消&#39;,</span><br><span class="line">    type: &#39;warning&#39;</span><br><span class="line">  &#125;).catch(err &#x3D;&gt; err)</span><br><span class="line">  &#x2F;&#x2F; 如果返回值时 promise 就可以用 async 和 await</span><br><span class="line">  &#x2F;&#x2F; 如果用户确认删除 则返回值 为 字符串 confrim</span><br><span class="line">  &#x2F;&#x2F; catch 捕获 用户的取消行为</span><br><span class="line">  &#x2F;&#x2F; 如果用户取消删除 则返回值为字符串cancel</span><br><span class="line">  if (confirmResult !&#x3D;&#x3D; &#39;confirm&#39;) &#123;</span><br><span class="line">    return this.$message.info(&#39;已取消删除&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  console.log(&#39;确认删除&#39;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>删除对接API</p>
<ul>
<li>请求路径：users/:id</li>
<li>请求方法：delete</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>用户 id</td>
<td>不能为空<code>参数是url参数:id</code></td>
</tr>
</tbody></table>
<ul>
<li>响应参数</li>
<li>响应数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;data&quot;: null,</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;删除成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="④创建新的rights分支"><a href="#④创建新的rights分支" class="headerlink" title="④创建新的rights分支"></a>④创建新的rights分支</h5><p>git branch   查看当前分支</p>
<p>git checkout -b rights     创建新的本地分支</p>
<p>git push -u origin rights 将新的本地分支推送给gitee仓库</p>
<p>git checkout master 转到本地的主分支</p>
<p>git merge login 将login分支合并到master中</p>
<p>git push  将本地master分支推送到gitee仓库中</p>
<h5 id="⑤权限列表"><a href="#⑤权限列表" class="headerlink" title="⑤权限列表"></a>⑤权限列表</h5><h6 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h6><p>组件Rights  并在router路由中导入 写在home 下的 children中</p>
<p>面包屑</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201204154648116.png" alt="image-20201204154648116"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!-- 面包屑导航区--&gt;</span><br><span class="line">&lt;el-breadcrumb separator-class&#x3D;&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">  &lt;el-breadcrumb-item :to&#x3D;&quot;&#123; path: &#39;&#x2F;home&#39; &#125;&quot;&gt;首页&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">  &lt;el-breadcrumb-item&gt;权限管理&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">  &lt;el-breadcrumb-item&gt;权限列表&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">&lt;&#x2F;el-breadcrumb&gt;</span><br></pre></td></tr></table></figure>
<p>卡片视图</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-card&gt;&lt;&#x2F;el-card&gt;</span><br></pre></td></tr></table></figure>
<p>定义 空数据 rightsList</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">export default &#123;</span><br><span class="line">data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      rightsList: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;  &#x2F;&#x2F; 生命周期函数 调用列表</span><br><span class="line">    this.getRightList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取权限列表</span><br><span class="line">    async getRightList() &#123;</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;rights&#x2F;list&#39;)  </span><br><span class="line">      								&#x2F;&#x2F;接口中是rights&#x2F;:type 但其类型为list 所以写死</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;获取权限列表失败!&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.rightsList &#x3D; res.data</span><br><span class="line">      console.log(this.rightsList)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>


<p>API</p>
<ul>
<li>请求路径：rights/:type</li>
<li>请求方法：get</li>
<li>请求参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>type</td>
<td>类型</td>
<td>值 list 或 tree , list 列表显示权限, tree 树状显示权限,<code>参数是url参数:type</code></td>
</tr>
</tbody></table>
<ul>
<li>响应参数</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>id</td>
<td>权限 ID</td>
<td></td>
</tr>
<tr>
<td>authName</td>
<td>权限说明</td>
<td></td>
</tr>
<tr>
<td>level</td>
<td>权限层级</td>
<td></td>
</tr>
<tr>
<td>pid</td>
<td>权限父 ID</td>
<td>、</td>
</tr>
<tr>
<td>path</td>
<td>对应访问路径</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>响应数据 type=list</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"> &#123;</span><br><span class="line">    &quot;data&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 101,</span><br><span class="line">            &quot;authName&quot;: &quot;商品管理&quot;,</span><br><span class="line">            &quot;level&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;pid&quot;: 0,</span><br><span class="line">            &quot;path&quot;: null</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 102,</span><br><span class="line">            &quot;authName&quot;: &quot;订单管理&quot;,</span><br><span class="line">            &quot;level&quot;: &quot;0&quot;,</span><br><span class="line">            &quot;pid&quot;: 0,</span><br><span class="line">            &quot;path&quot;: null</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;获取权限列表成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="权限列表页面布局渲染"><a href="#权限列表页面布局渲染" class="headerlink" title="权限列表页面布局渲染"></a>权限列表页面布局渲染</h6><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201204154634896.png" alt="image-20201204154634896"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--    卡片视图--&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">      &lt;el-table :data&#x3D;&quot;rightsList&quot; border stripe&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;#&quot; type&#x3D;&quot;index&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;权限名称&quot; prop&#x3D;&quot;authName&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;路径&quot; prop&#x3D;&quot;path&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;权限等级&quot; prop&#x3D;&quot;level&quot;&gt;</span><br><span class="line">          &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">            &lt;el-tag v-if&#x3D;&quot;scope.row.level &#x3D;&#x3D;&#x3D; &#39;0&#39;&quot;&gt;一级&lt;&#x2F;el-tag&gt;</span><br><span class="line">            &lt;el-tag type&#x3D;&quot;success&quot; v-else-if&#x3D;&quot;scope.row.level &#x3D;&#x3D;&#x3D; &#39;1&#39;&quot;&gt;二级&lt;&#x2F;el-tag&gt;</span><br><span class="line">            &lt;el-tag type&#x3D;&quot;warning&quot; v-else&gt;三级&lt;&#x2F;el-tag&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br><span class="line">      &lt;&#x2F;el-table&gt;</span><br><span class="line">    &lt;&#x2F;el-card&gt;</span><br></pre></td></tr></table></figure>
<h5 id="⑥权限管理业务分析"><a href="#⑥权限管理业务分析" class="headerlink" title="⑥权限管理业务分析"></a>⑥权限管理业务分析</h5><p> 通过权限管理模块控制不同的用户可以进行哪些操作，具体可以通过角色的方式进行控制，即每个用户分配一个特定的角色，角色包括不同的功能权限。</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201204154816669.png" alt="image-20201204154816669"></p>
<p>权限：对于一个列表来说，都有增删改查等操作，每一个操作都一种权限</p>
<p>有的用户可能就只有添加权限没有删除权限</p>
<p>有的用户可能就只有查看权限</p>
<p>不同的用户身份不同所拥有的权限也不同</p>
<h5 id="⑦角色列表路由的切换"><a href="#⑦角色列表路由的切换" class="headerlink" title="⑦角色列表路由的切换"></a>⑦角色列表路由的切换</h5><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 面包屑导航区--&gt;</span><br><span class="line">    &lt;el-breadcrumb separator-class&#x3D;&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to&#x3D;&quot;&#123; path: &#39;&#x2F;home&#39; &#125;&quot;&gt;首页&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;权限管理&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;角色列表&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">    &lt;&#x2F;el-breadcrumb&gt;</span><br><span class="line">    &lt;!--    卡片视图--&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">&lt;!--      添加角色按钮区--&gt;</span><br><span class="line">      &lt;el-row&gt;</span><br><span class="line">        &lt;el-col&gt;</span><br><span class="line">          &lt;el-button type&#x3D;&quot;primary&quot;&gt;添加角色&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;el-col&gt;</span><br><span class="line">      &lt;&#x2F;el-row&gt;</span><br><span class="line">      &lt;!--    角色列表区--&gt;</span><br><span class="line">    &lt;&#x2F;el-card&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;Roles&#39;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      &#x2F;&#x2F; 所有角色列表数据</span><br><span class="line">      rolelist: []</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    this.getRolesList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取所有角色的列表</span><br><span class="line">    async getRolesList() &#123;</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;roles&#39;)</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;获取角色列表失败&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.rolelist &#x3D; res.data</span><br><span class="line">      console.log(this.rolelist)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>请求路径：roles</p>
</li>
<li><p>请求方法：get</p>
</li>
<li><p>响应数据说明</p>
<ul>
<li>第一层为角色信息</li>
</ul>
<ul>
<li>第二层开始为权限说明，权限一共有 3 层权限</li>
<li>最后一层权限，不包含 <code>children</code> 属性</li>
</ul>
</li>
</ul>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">    &quot;data&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 30,</span><br><span class="line">            &quot;roleName&quot;: &quot;主管&quot;,</span><br><span class="line">            &quot;roleDesc&quot;: &quot;技术负责人&quot;,</span><br><span class="line">            &quot;children&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;id&quot;: 101,</span><br><span class="line">                    &quot;authName&quot;: &quot;商品管理&quot;,</span><br><span class="line">                    &quot;path&quot;: null,</span><br><span class="line">                    &quot;children&quot;: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;id&quot;: 104,</span><br><span class="line">                            &quot;authName&quot;: &quot;商品列表&quot;,</span><br><span class="line">                            &quot;path&quot;: null,</span><br><span class="line">                            &quot;children&quot;: [</span><br><span class="line">                                &#123;</span><br><span class="line">                                    &quot;id&quot;: 105,</span><br><span class="line">                                    &quot;authName&quot;: &quot;添加商品&quot;,</span><br><span class="line">                                    &quot;path&quot;: null</span><br><span class="line">                                &#125;</span><br><span class="line">                            ]</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;获取成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="列表渲染"><a href="#列表渲染" class="headerlink" title="列表渲染"></a>列表渲染</h6><p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201204162624505.png" alt="image-20201204162624505"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">   &lt;!--    角色列表区--&gt;</span><br><span class="line">      &lt;el-table :data&#x3D;&quot;rolelist&quot; border stripe&gt;</span><br><span class="line">&lt;!--        展开列--&gt;</span><br><span class="line">        &lt;el-table-column type&#x3D;&quot;expand&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">&lt;!--        索引列--&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;#&quot; type&#x3D;&quot;index&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;角色名称&quot; prop&#x3D;&quot;roleName&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;角色描述&quot; prop&#x3D;&quot;roleDesc&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;操作&quot; width&#x3D;&quot;300px&quot;&gt;</span><br><span class="line">          &lt;template&gt;</span><br><span class="line">            &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-edit&quot;&gt;编辑&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;danger&quot; icon&#x3D;&quot;el-icon-delete&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;warning&quot; icon&#x3D;&quot;el-icon-setting&quot;&gt;分配权限&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br><span class="line">      &lt;&#x2F;el-table&gt;</span><br><span class="line">    &lt;&#x2F;el-card&gt;</span><br></pre></td></tr></table></figure>
<h6 id="添加，编辑，删除"><a href="#添加，编辑，删除" class="headerlink" title="添加，编辑，删除"></a>添加，编辑，删除</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 面包屑导航区--&gt;</span><br><span class="line">    &lt;el-breadcrumb separator-class&#x3D;&quot;el-icon-arrow-right&quot;&gt;</span><br><span class="line">      &lt;el-breadcrumb-item :to&#x3D;&quot;&#123; path: &#39;&#x2F;home&#39; &#125;&quot;&gt;首页&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;权限管理&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">      &lt;el-breadcrumb-item&gt;角色列表&lt;&#x2F;el-breadcrumb-item&gt;</span><br><span class="line">    &lt;&#x2F;el-breadcrumb&gt;</span><br><span class="line">    &lt;!--    卡片视图--&gt;</span><br><span class="line">    &lt;el-card&gt;</span><br><span class="line">&lt;!--      添加角色按钮区--&gt;</span><br><span class="line">      &lt;el-row&gt;</span><br><span class="line">        &lt;el-col&gt;</span><br><span class="line">          &lt;el-button type&#x3D;&quot;primary&quot;  @click&#x3D;&quot;addDialogVisible &#x3D; true&quot;&gt;添加角色&lt;&#x2F;el-button&gt;</span><br><span class="line">        &lt;&#x2F;el-col&gt;</span><br><span class="line">      &lt;&#x2F;el-row&gt;</span><br><span class="line">      &lt;!--    角色列表区--&gt;</span><br><span class="line">      &lt;el-table :data&#x3D;&quot;rolelist&quot; border stripe&gt;</span><br><span class="line">&lt;!--        展开列--&gt;</span><br><span class="line">        &lt;el-table-column type&#x3D;&quot;expand&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">&lt;!--        索引列--&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;#&quot; type&#x3D;&quot;index&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;角色名称&quot; prop&#x3D;&quot;roleName&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;角色描述&quot; prop&#x3D;&quot;roleDesc&quot;&gt;&lt;&#x2F;el-table-column&gt;</span><br><span class="line">        &lt;el-table-column label&#x3D;&quot;操作&quot; width&#x3D;&quot;300px&quot;&gt;</span><br><span class="line">          &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">            &lt;!--            修改按钮  scope.row.id获取当前用户的id--&gt;</span><br><span class="line">            &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;primary&quot; icon&#x3D;&quot;el-icon-edit&quot; @click&#x3D;&quot;showEditDialog(scope.row.id)&quot;&gt;编辑&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;!--            删除按钮--&gt;</span><br><span class="line">            &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;danger&quot; icon&#x3D;&quot;el-icon-delete&quot; @click&#x3D;&quot;removeUserById(scope.row.id)&quot;&gt;删除&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;warning&quot; icon&#x3D;&quot;el-icon-setting&quot;&gt;分配权限&lt;&#x2F;el-button&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br><span class="line">      &lt;&#x2F;el-table&gt;</span><br><span class="line">    &lt;&#x2F;el-card&gt;</span><br><span class="line">    &lt;!--    添加用户的基本对话框  --&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title&#x3D;&quot;添加角色&quot;</span><br><span class="line">      :visible.sync&#x3D;&quot;addDialogVisible&quot;</span><br><span class="line">      width&#x3D;&quot;30%&quot;</span><br><span class="line">      @close&#x3D;&quot;addDialogClosed&quot;&gt;</span><br><span class="line">      &lt;!--        内容主体区--&gt;</span><br><span class="line">      &lt;el-form :model&#x3D;&quot;addRolesForm&quot; :rules&#x3D;&quot;addRolesFormRules&quot; ref&#x3D;&quot;addRolesFormRef&quot; label-width&#x3D;&quot;80px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;角色名称&quot; prop&#x3D;&quot;roleName&quot;&gt;</span><br><span class="line">          &lt;el-input v-model&#x3D;&quot;addRolesForm.roleName&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;角色描述&quot; prop&#x3D;&quot;roleDesc&quot;&gt;</span><br><span class="line">          &lt;el-input v-model&#x3D;&quot;addRolesForm.roleDesc&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">      &lt;&#x2F;el-form&gt;</span><br><span class="line">      &lt;!--        底部区域--&gt;</span><br><span class="line">      &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click&#x3D;&quot;addDialogVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;addUser&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-dialog&gt;</span><br><span class="line">    &lt;!-- 修改用户的对话框--&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title&#x3D;&quot;修改用户&quot;</span><br><span class="line">      :visible.sync&#x3D;&quot;editDialogVisible&quot;</span><br><span class="line">      width&#x3D;&quot;50%&quot;</span><br><span class="line">      @close&#x3D;&quot;editDialogClosed&quot;&gt;</span><br><span class="line">      &lt;el-form :model&#x3D;&quot;editRolesForm&quot; :rules&#x3D;&quot;editRolesFormRules&quot; ref&#x3D;&quot;editRolesFormRef&quot; label-width&#x3D;&quot;70px&quot;&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;角色名称&quot; prop&#x3D;&quot;roleName&quot;&gt;</span><br><span class="line">          &lt;el-input v-model&#x3D;&quot;editRolesForm.roleName&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">        &lt;el-form-item label&#x3D;&quot;角色描述&quot; prop&#x3D;&quot;roleDesc&quot;&gt;</span><br><span class="line">          &lt;el-input v-model&#x3D;&quot;editRolesForm.roleDesc&quot;&gt;&lt;&#x2F;el-input&gt;</span><br><span class="line">        &lt;&#x2F;el-form-item&gt;</span><br><span class="line">      &lt;&#x2F;el-form&gt;</span><br><span class="line">      &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">           &lt;el-button @click&#x3D;&quot;editDialogVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">            &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;editUserInfo&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">         &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-dialog&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &#39;Roles&#39;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      &#x2F;&#x2F; 所有角色列表数据</span><br><span class="line">      rolelist: [],</span><br><span class="line">      &#x2F;&#x2F; 控制添加角色的对话框的显示和隐藏</span><br><span class="line">      addDialogVisible: false,</span><br><span class="line">      &#x2F;&#x2F; 添加用户表单对象</span><br><span class="line">      addRolesForm: &#123;</span><br><span class="line">        roleDesc: &#39;&#39;,</span><br><span class="line">        roleName: &#39;&#39;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x2F;&#x2F; 添加表单的验证规则对象</span><br><span class="line">      addRolesFormRules: &#123;</span><br><span class="line">        roleDesc: [&#123;</span><br><span class="line">          require: true,</span><br><span class="line">          message: &#39;请输入角色描述&#39;,</span><br><span class="line">          trigger: &#39;blur&#39;</span><br><span class="line">        &#125;],</span><br><span class="line">        roleName: [&#123;</span><br><span class="line">          require: true,</span><br><span class="line">          message: &#39;请输入角色名称&#39;,</span><br><span class="line">          trigger: &#39;blur&#39;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x2F;&#x2F; 控制修改用户对话框的显示与隐藏</span><br><span class="line">      editDialogVisible: false,</span><br><span class="line">      &#x2F;&#x2F; 定义私有对象  查询到的用户信息对象</span><br><span class="line">      editRolesForm: &#123;&#125;,</span><br><span class="line">      &#x2F;&#x2F; 修改表单的验证规则对象</span><br><span class="line">      editRolesFormRules: &#123;</span><br><span class="line">        roleDesc: [&#123;</span><br><span class="line">          require: true,</span><br><span class="line">          message: &#39;请输入角色描述&#39;,</span><br><span class="line">          trigger: &#39;blur&#39;</span><br><span class="line">        &#125;],</span><br><span class="line">        roleName: [&#123;</span><br><span class="line">          require: true,</span><br><span class="line">          message: &#39;请输入角色名称&#39;,</span><br><span class="line">          trigger: &#39;blur&#39;</span><br><span class="line">        &#125;]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created () &#123;</span><br><span class="line">    this.getRolesList()</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    &#x2F;&#x2F; 获取所有角色的列表</span><br><span class="line">    async getRolesList() &#123;</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;roles&#39;)</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;获取角色列表失败&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.rolelist &#x3D; res.data</span><br><span class="line">      console.log(this.rolelist)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 监听角色对话框关闭事件-&gt;表单ref引用，启动resetFields</span><br><span class="line">    addDialogClosed () &#123;</span><br><span class="line">      this.$refs.addRolesFormRef.resetFields()</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 点击按钮， 添加新用户</span><br><span class="line">    addUser () &#123;</span><br><span class="line">      this.$refs.addRolesFormRef.validate(async valid &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F; console.log(valid)</span><br><span class="line">        &#x2F;&#x2F; eslint-disable-next-line no-useless-return</span><br><span class="line">        if (!valid) return</span><br><span class="line">        &#x2F;&#x2F; 可以发起用户的网络请求</span><br><span class="line">        const &#123; data: res &#125; &#x3D; await this.$http.post(&#39;roles&#39;, this.addRolesForm)</span><br><span class="line">        if (res.meta.status !&#x3D;&#x3D; 201) &#123;</span><br><span class="line">          this.$message.error(&#39;添加用户失败&#39;)</span><br><span class="line">        &#125;</span><br><span class="line">        this.$message.success(&#39;添加用户成功&#39;)</span><br><span class="line">        &#x2F;&#x2F; console.log(this.res)</span><br><span class="line">        &#x2F;&#x2F; 隐藏对话框</span><br><span class="line">        this.addDialogVisible &#x3D; false</span><br><span class="line">        &#x2F;&#x2F; 重新获取数据列表</span><br><span class="line">        this.getRolesList()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 展示用户编辑的对话框</span><br><span class="line">    async showEditDialog (id) &#123;</span><br><span class="line">      &#x2F;&#x2F; console.log(id)</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;roles&#x2F;&#39; + id)</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;查询角色信息失败&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.editRolesForm &#x3D; res.data</span><br><span class="line">      &#x2F;&#x2F; console.log(this.editRolesForm.id)</span><br><span class="line">      this.editDialogVisible &#x3D; true</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 监听修改用户对话框的关闭事件</span><br><span class="line">    editDialogClosed() &#123;</span><br><span class="line">      this.$refs.editRolesFormRef.resetFields()</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 修改用户信息并提交校验成功返回true</span><br><span class="line">    editUserInfo() &#123;</span><br><span class="line">      this.$refs.editRolesFormRef.validate(async valid &#x3D;&gt; &#123;</span><br><span class="line">        &#x2F;&#x2F; console.log(valid)</span><br><span class="line">        &#x2F;&#x2F; console.log(this.editRolesForm)</span><br><span class="line">        &#x2F;&#x2F; eslint-disable-next-line no-useless-return</span><br><span class="line">        if (!valid) return</span><br><span class="line">        &#x2F;&#x2F; 发起修改用户信息的数据请求</span><br><span class="line">        const &#123; data: res &#125; &#x3D; await this.$http.put(&#39;roles&#x2F;&#39; + this.editRolesForm.roleId, &#123;</span><br><span class="line">          roleDesc: this.editRolesForm.roleDesc,</span><br><span class="line">          roleName: this.editRolesForm.roleName</span><br><span class="line">        &#125;)</span><br><span class="line">        if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">          console.log(this.editRolesForm.roleId)</span><br><span class="line">          return this.$message.error(&#39;更新用户信息失败!&#39;)</span><br><span class="line">        &#125;</span><br><span class="line">        &#x2F;&#x2F; 关闭对话框</span><br><span class="line">        this.editDialogVisible &#x3D; false</span><br><span class="line">        &#x2F;&#x2F; 提示修改成功</span><br><span class="line">        this.$message.success(&#39;更新用户信息成功&#39;)</span><br><span class="line">        &#x2F;&#x2F; 刷新数据列表</span><br><span class="line">        this.getRolesList()</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    &#x2F;&#x2F; 根据id删除用户信息</span><br><span class="line">    async removeUserById (id) &#123;</span><br><span class="line">      &#x2F;&#x2F; 弹框询问用户是否删除数据</span><br><span class="line">      const confirmResult &#x3D; await this.$confirm(&#39;此操作将永久删除该用户, 是否继续?&#39;, &#39;提示&#39;, &#123;</span><br><span class="line">        confirmButtonText: &#39;确定&#39;,</span><br><span class="line">        cancelButtonText: &#39;取消&#39;,</span><br><span class="line">        type: &#39;warning&#39;</span><br><span class="line">      &#125;).catch(err &#x3D;&gt; err)</span><br><span class="line">      &#x2F;&#x2F; 如果返回值时 promise 就可以用 async 和 await</span><br><span class="line">      &#x2F;&#x2F; 如果用户确认删除 则返回值 为 字符串 confrim</span><br><span class="line">      &#x2F;&#x2F; catch 捕获用户的取消行为</span><br><span class="line">      &#x2F;&#x2F; 如果用户取消删除 则返回值为字符串cancel</span><br><span class="line">      if (confirmResult !&#x3D;&#x3D; &#39;confirm&#39;) &#123;</span><br><span class="line">        return this.$message.info(&#39;已取消删除&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      &#x2F;&#x2F; console.log(&#39;确认删除&#39;)</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.delete(&#39;roles&#x2F;&#39; + id)</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;删除用户失败!&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      this.$message.success(&#39;删除用户成功!&#39;)</span><br><span class="line">      this.getRolesList()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>
<h6 id="角色权限列表下拉展示"><a href="#角色权限列表下拉展示" class="headerlink" title="角色权限列表下拉展示"></a>角色权限列表下拉展示</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--        展开列--&gt;</span><br><span class="line">        &lt;el-table-column type&#x3D;&quot;expand&quot;&gt;</span><br><span class="line">          &lt;template slot-scope&#x3D;&quot;scpoe&quot;&gt;</span><br><span class="line">&lt;!--            动态绑定样式 通过数组的方式添加底部样式 并且判断i1&#x3D;&#x3D;&#x3D;0时顶添加部样式--&gt;</span><br><span class="line">            &lt;el-row :class&#x3D;&quot;[&#39;bdbottom&#39;,i1 &#x3D;&#x3D;&#x3D; 0 ? &#39;bdtop&#39; : &#39;&#39; ]&quot; v-for&#x3D;&quot;(item1 , i1) in scpoe.row.children&quot; :key&#x3D;&quot;item1.id&quot;&gt;</span><br><span class="line">&lt;!--              渲染一级权限 占5列--&gt;</span><br><span class="line">              &lt;el-col :span&#x3D;&quot;5&quot;&gt;</span><br><span class="line">                &lt;el-tag&gt;&#123;&#123;item1.authName&#125;&#125;&lt;&#x2F;el-tag&gt;</span><br><span class="line">              &lt;&#x2F;el-col&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;el-icon-caret-right&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">&lt;!--              渲染二级和三级权限--&gt;</span><br><span class="line">              &lt;el-col :span&#x3D;&quot;19&quot;&gt;</span><br><span class="line">&lt;!--                通过 for 循环 嵌套渲染二级权限 动态绑定样式 通过数组的方式添加 判断i2&#x3D;&#x3D;&#x3D;0时顶添加部样式--&gt;</span><br><span class="line">                &lt;el-row :class&#x3D;&quot;[i2 &#x3D;&#x3D;&#x3D; 0 ? &#39;&#39; : &#39;bdtop&#39;]&quot; v-for&#x3D;&quot;(item2 , i2) in item1.children&quot; :key&#x3D;&quot;item2.id&quot;&gt;</span><br><span class="line">                  &lt;el-col :span&#x3D;&quot;6&quot;&gt;</span><br><span class="line">                    &lt;el-tag type&#x3D;&quot;success&quot;&gt;&#123;&#123;item2.authName&#125;&#125;&lt;&#x2F;el-tag&gt;</span><br><span class="line">                    &lt;i class&#x3D;&quot;el-icon-caret-right&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                  &lt;&#x2F;el-col&gt;</span><br><span class="line">                  &lt;el-col :span&#x3D;&quot;18&quot;&gt;</span><br><span class="line">                    &lt;el-tag type&#x3D;&quot;warning&quot; v-for&#x3D;&quot;(item3) in item2.children&quot; :key&#x3D;&quot;item3.id&quot;&gt;&#123;&#123;item3.authName&#125;&#125;&lt;&#x2F;el-tag&gt;</span><br><span class="line">                  &lt;&#x2F;el-col&gt;</span><br><span class="line">                &lt;&#x2F;el-row&gt;</span><br><span class="line">              &lt;&#x2F;el-col&gt;</span><br><span class="line">            &lt;&#x2F;el-row&gt;</span><br><span class="line">            &lt;pre&gt;</span><br><span class="line">                 &#x2F;&#x2F; scope.row拿到集合</span><br><span class="line">            &#123;&#123;scpoe.row&#125;&#125;</span><br><span class="line">            &lt;&#x2F;pre&gt;</span><br><span class="line">          &lt;&#x2F;template&gt;</span><br><span class="line">        &lt;&#x2F;el-table-column&gt;</span><br></pre></td></tr></table></figure>


<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;style lang&#x3D;&quot;less&quot; scoped&gt;</span><br><span class="line">.el-tag&#123;</span><br><span class="line">  margin: 7px;</span><br><span class="line">&#125;</span><br><span class="line">.bdtop &#123;</span><br><span class="line">  border-top: 1px solid #eee;</span><br><span class="line">&#125;</span><br><span class="line">.bdbottom &#123;</span><br><span class="line">  border-bottom: 1px solid #eee;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>
<h6 id="优化"><a href="#优化" class="headerlink" title="优化"></a>优化</h6><p>页面布局</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201207165852164.png" alt="image-20201207165852164"></p>
<p>居中</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201207170004714.png" alt="image-20201207170004714"></p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201207170044901.png" alt="image-20201207170044901"></p>
<h6 id="为每一个标签添加删除"><a href="#为每一个标签添加删除" class="headerlink" title="为每一个标签添加删除"></a>为每一个标签添加删除</h6><p>设置<code>closable</code>属性可以定义一个标签是否可移除。默认的标签移除时会附带渐变动画，如果不想使用，可以设置<code>disable-transitions</code>属性，它接受一个<code>Boolean</code>，true 为关闭。</p>
<table>
<thead>
<tr>
<th align="left">事件名称</th>
<th align="left">说明</th>
<th align="left">回调参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">close</td>
<td align="left">关闭 Tag 时触发的事件</td>
<td align="left">—</td>
</tr>
</tbody></table>
<p>API</p>
<ul>
<li><p>请求路径：roles/:roleId/rights/:rightId</p>
</li>
<li><p>请求方法：delete</p>
</li>
<li><p>请求参数</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>:roleId</td>
<td>角色 ID</td>
<td>不能为空<code>携带在url中</code></td>
</tr>
<tr>
<td>:rightId</td>
<td>权限 ID</td>
<td>不能为空<code>携带在url中</code></td>
</tr>
</tbody></table>
</li>
<li><p>响应数据说明 </p>
<ul>
<li>返回的data, 是当前角色下最新的权限数据</li>
</ul>
</li>
<li><p>响应数据</p>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;data&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;id&quot;: 101,</span><br><span class="line">            &quot;authName&quot;: &quot;商品管理&quot;,</span><br><span class="line">            &quot;path&quot;: null,</span><br><span class="line">            &quot;children&quot;: [</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;id&quot;: 104,</span><br><span class="line">                    &quot;authName&quot;: &quot;商品列表&quot;,</span><br><span class="line">                    &quot;path&quot;: null,</span><br><span class="line">                    &quot;children&quot;: [</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;id&quot;: 105,</span><br><span class="line">                            &quot;authName&quot;: &quot;添加商品&quot;,</span><br><span class="line">                            &quot;path&quot;: null</span><br><span class="line">                        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">                            &quot;id&quot;: 116,</span><br><span class="line">                            &quot;authName&quot;: &quot;修改&quot;,</span><br><span class="line">                            &quot;path&quot;: null</span><br><span class="line">                        &#125;</span><br><span class="line">                    ]</span><br><span class="line">                &#125;</span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;取消权限成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>代码</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--            动态绑定样式 通过数组的方式添加底部样式 并且判断i1&#x3D;&#x3D;&#x3D;0时顶添加部样式--&gt;</span><br><span class="line">            &lt;el-row :class&#x3D;&quot;[&#39;bdbottom&#39;,i1 &#x3D;&#x3D;&#x3D; 0 ? &#39;bdtop&#39; : &#39;&#39; ,&#39;vcenter&#39;]&quot; v-for&#x3D;&quot;(item1 , i1) in scpoe.row.children&quot; :key&#x3D;&quot;item1.id&quot;&gt;</span><br><span class="line">&lt;!--              渲染一级权限 占5列--&gt;</span><br><span class="line">              &lt;el-col :span&#x3D;&quot;5&quot;&gt;</span><br><span class="line">                  </span><br><span class="line">                &lt;el-tag closable @close&#x3D;&quot;removeRightById(scpoe.row , item1.id)&quot;&gt;&#123;&#123;item1.authName&#125;&#125;&lt;&#x2F;el-tag&gt;</span><br><span class="line">              &lt;&#x2F;el-col&gt;</span><br><span class="line">              &lt;i class&#x3D;&quot;el-icon-caret-right&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">&lt;!--              渲染二级和三级权限--&gt;</span><br><span class="line">              &lt;el-col :span&#x3D;&quot;19&quot;&gt;</span><br><span class="line">&lt;!--                通过 for 循环 嵌套渲染二级权限 动态绑定样式 通过数组的方式添加 判断i2&#x3D;&#x3D;&#x3D;0时顶添加部样式--&gt;</span><br><span class="line">                &lt;el-row :class&#x3D;&quot;[i2 &#x3D;&#x3D;&#x3D; 0 ? &#39;&#39; : &#39;bdtop&#39;,&#39;vcenter&#39;]&quot; v-for&#x3D;&quot;(item2 , i2) in item1.children&quot; :key&#x3D;&quot;item2.id&quot;&gt;</span><br><span class="line">                  &lt;el-col :span&#x3D;&quot;6&quot;&gt;</span><br><span class="line">                    &lt;el-tag type&#x3D;&quot;success&quot; closable @close&#x3D;&quot;removeRightById(scpoe.row , item2.id)&quot;&gt;&#123;&#123;item2.authName&#125;&#125;&lt;&#x2F;el-tag&gt;</span><br><span class="line">                    &lt;i class&#x3D;&quot;el-icon-caret-right&quot;&gt;&lt;&#x2F;i&gt;</span><br><span class="line">                  &lt;&#x2F;el-col&gt;</span><br><span class="line">                  &lt;el-col :span&#x3D;&quot;18&quot;&gt;</span><br><span class="line">                    &lt;el-tag type&#x3D;&quot;warning&quot; v-for&#x3D;&quot;(item3) in item2.children&quot; :key&#x3D;&quot;item3.id&quot; closable @close&#x3D;&quot;removeRightById(scpoe.row , item3.id)&quot;&gt;&#123;&#123;item3.authName&#125;&#125;&lt;&#x2F;el-tag&gt;</span><br><span class="line">                  &lt;&#x2F;el-col&gt;</span><br><span class="line">                &lt;&#x2F;el-row&gt;</span><br><span class="line">              &lt;&#x2F;el-col&gt;</span><br><span class="line">            &lt;&#x2F;el-row&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 根据Id删除对应的权限</span><br><span class="line">async removeRightById(role, rightid) &#123;</span><br><span class="line">  &#x2F;&#x2F; 弹框提示用户是否要删除</span><br><span class="line">  const confirmResult &#x3D; await this.$confirm(&#39;此操作将永久删除该权限, 是否继续?&#39;, &#39;提示&#39;, &#123;</span><br><span class="line">    confirmButtonText: &#39;确定&#39;,</span><br><span class="line">    cancelButtonText: &#39;取消&#39;,</span><br><span class="line">    type: &#39;warning&#39;</span><br><span class="line">  &#125;).catch(err &#x3D;&gt; err)</span><br><span class="line">  if (confirmResult !&#x3D;&#x3D; &#39;confirm&#39;) &#123;</span><br><span class="line">    return this.$message.info(&#39;已取消删除&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F; console.log(&#39;确认删除&#39;)</span><br><span class="line">  const &#123; data: res &#125; &#x3D; await this.$http.delete(&#96;roles&#x2F;$&#123;role.id&#125;&#96; + &#96;roles&#x2F;$&#123;rightid&#125;&#96;)</span><br><span class="line">  if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">    return this.$message.error(&#39;删除用户失败!&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  this.$message.success(&#39;删除用户成功!&#39;)</span><br><span class="line">  &#x2F;&#x2F; this.getRolesList()不能重新获取页面数据会发生信息反转，应该要重新为角色赋值</span><br><span class="line">  role.children &#x3D; res.data</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="分配权限"><a href="#分配权限" class="headerlink" title="分配权限"></a>分配权限</h6><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;warning&quot; icon&#x3D;&quot;el-icon-setting&quot; @click&#x3D;&quot;showSetRightDialog&quot;&gt;分配权限&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;!--    分配权限对话框--&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title&#x3D;&quot;分配权限&quot;</span><br><span class="line">      :visible.sync&#x3D;&quot;setRightDialogVisible&quot;</span><br><span class="line">      width&#x3D;&quot;50%&quot;&gt;</span><br><span class="line">      &lt;span&gt;这是一段信息&lt;&#x2F;span&gt;</span><br><span class="line">      &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click&#x3D;&quot;setRightDialogVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;setRightDialogVisible &#x3D; false&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-dialog&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 展示分配权限对话框</span><br><span class="line">setRightDialogVisible: false,</span><br><span class="line">&#x2F;&#x2F; 所有权限的数据 默认为空</span><br><span class="line">rightsList: []</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 展示分配权限对话框</span><br><span class="line">async showSetRightDialog () &#123;</span><br><span class="line">  &#x2F;&#x2F; 获取所有权限列表</span><br><span class="line">  const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;rights&#x2F;tree&#39;)</span><br><span class="line">  this.setRightDialogVisible &#x3D; true</span><br><span class="line">  if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">    return this.$message.error(&#39;获取用户权限失败&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  &#x2F;&#x2F; 把获取到的权限数据保存到 data 中</span><br><span class="line">  this.rightsList &#x3D; res.date</span><br><span class="line">  console.log(this.rightsList)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>树形控件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">:data数据绑定提供数据源 :props为整棵树指定 绑定数据的字段</span><br><span class="line">&lt;el-tree :data&#x3D;&quot;rightsList&quot; :props&#x3D;&quot;treeProps&quot; &gt;&lt;&#x2F;el-tree&gt;</span><br><span class="line"></span><br><span class="line">children 指的是 实现父子嵌套用的是哪个属性</span><br><span class="line">label 数据字段</span><br><span class="line"> &#x2F;&#x2F; 树形控件的属性绑定对象</span><br><span class="line">      treeProps: &#123;</span><br><span class="line">        label: &#39;authName&#39;,</span><br><span class="line">        children: &#39;children&#39;</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure>
<p>指定树形控件选中时的属性以及默认展开</p>
<table>
<thead>
<tr>
<th align="left">data</th>
<th align="left">展示数据</th>
<th align="left">array</th>
<th align="left">—</th>
<th align="left">—</th>
</tr>
</thead>
<tbody><tr>
<td align="left">node-key</td>
<td align="left">每个树节点用来作为唯一标识的属性，整棵树应该是唯一的</td>
<td align="left">String</td>
<td align="left">—</td>
<td align="left">—</td>
</tr>
<tr>
<td align="left">default-expand-all</td>
<td align="left">是否默认展开所有节点</td>
<td align="left">boolean</td>
<td align="left">—</td>
<td align="left">false</td>
</tr>
<tr>
<td align="left">default-checked-keys</td>
<td align="left">默认勾选的节点的 key 的数组</td>
<td align="left">array</td>
<td align="left">—</td>
<td align="left">—</td>
</tr>
</tbody></table>
<p>默认勾选节点，从三级节点开始判断，当点开分配权限时，获取当前角色身上所有三级权限的id放到一个数组中，绑定default-checked-keys 展示出来</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">   &lt;el-button size&#x3D;&quot;mini&quot; type&#x3D;&quot;warning&quot; icon&#x3D;&quot;el-icon-setting&quot;</span><br><span class="line">                       @click&#x3D;&quot;showSetRightDialog(scope.row)&quot;&gt;分配权限&lt;&#x2F;el-button&gt;</span><br><span class="line">-----------------------------------------------</span><br><span class="line">&lt;!--    分配权限对话框--&gt;</span><br><span class="line">    &lt;el-dialog</span><br><span class="line">      title&#x3D;&quot;分配权限&quot;</span><br><span class="line">      :visible.sync&#x3D;&quot;setRightDialogVisible&quot;</span><br><span class="line">      width&#x3D;&quot;50%&quot;&gt;</span><br><span class="line"> &lt;!--      树型控件--&gt;</span><br><span class="line">      &lt;el-tree :data&#x3D;&quot;rightsList&quot; :props&#x3D;&quot;treeProps&quot; show-checkbox node-key&#x3D;&quot;id&quot; default-expand-all :default-checked-keys&#x3D;&quot;defkeys&quot;&gt;&lt;&#x2F;el-tree&gt;</span><br><span class="line">      &lt;span slot&#x3D;&quot;footer&quot; class&#x3D;&quot;dialog-footer&quot;&gt;</span><br><span class="line">    &lt;el-button @click&#x3D;&quot;setRightDialogVisible &#x3D; false&quot;&gt;取 消&lt;&#x2F;el-button&gt;</span><br><span class="line">    &lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;setRightDialogVisible &#x3D; false&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br><span class="line">  &lt;&#x2F;span&gt;</span><br><span class="line">    &lt;&#x2F;el-dialog&gt;</span><br><span class="line">------------------------------------------  </span><br><span class="line">        &#x2F;&#x2F; 展示分配权限对话框</span><br><span class="line">      setRightDialogVisible: false,</span><br><span class="line">      &#x2F;&#x2F; 所有权限的数据 默认为空</span><br><span class="line">      rightsList: [],</span><br><span class="line">      &#x2F;&#x2F; 树形控件的属性绑定对象</span><br><span class="line">      treeProps: &#123;</span><br><span class="line">        label: &#39;authName&#39;,</span><br><span class="line">        children: &#39;children&#39;</span><br><span class="line">      &#125;,</span><br><span class="line">      &#x2F;&#x2F; 默认选中的节点Id值数组</span><br><span class="line">      defkeys: []</span><br><span class="line">  ----------------------------------------------    </span><br><span class="line">  &#x2F;&#x2F; 展示分配权限对话框</span><br><span class="line">    async showSetRightDialog (role) &#123;</span><br><span class="line">      &#x2F;&#x2F; 获取所有权限列表</span><br><span class="line">      const &#123; data: res &#125; &#x3D; await this.$http.get(&#39;rights&#x2F;tree&#39;)</span><br><span class="line">      this.setRightDialogVisible &#x3D; true</span><br><span class="line">      if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">        return this.$message.error(&#39;获取用户权限失败&#39;)</span><br><span class="line">      &#125;</span><br><span class="line">      &#x2F;&#x2F; 把获取到的权限数据保存到 data 中</span><br><span class="line">      this.rightsList &#x3D; res.date</span><br><span class="line">      console.log(this.rightsList)</span><br><span class="line">      &#x2F;&#x2F; 递归三级节点的id</span><br><span class="line">      this.getLeafKeys(role, this.defkeys)</span><br><span class="line">      this.setRightDialogVisible &#x3D; true</span><br><span class="line">    &#125;,</span><br><span class="line">&#x2F;&#x2F; 通过递归的形式，获取角色下所有的三级权限的id，并保存到defkeys中</span><br><span class="line">getLeafKeys (node, arr) &#123;</span><br><span class="line">  &#x2F;&#x2F; 如果当前 node 节点不包含children属性则是三级节点</span><br><span class="line">  if (!node.children) &#123;</span><br><span class="line">    return arr.push(node.id)</span><br><span class="line">  &#125;</span><br><span class="line">  node.children.forEach(item &#x3D;&gt;</span><br><span class="line">    this.getRolesList(item, arr))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h6 id="bug优化—-对话框关闭未清除数据"><a href="#bug优化—-对话框关闭未清除数据" class="headerlink" title="bug优化— 对话框关闭未清除数据"></a>bug优化— 对话框关闭未清除数据</h6><p>每次点击按钮的时候都会将当前角色的权限三级 id 保存到 defkeys 数组中</p>
<p>在关闭对话框的时候并没有及时清理数组里面的数据</p>
<p>导致之前的数据一直存在，</p>
<p>解决： 应该在每一次关闭对话框的时候都清理一次当前数组中的元素项</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201208101730278.png" alt="image-20201208101730278"></p>
<h6 id="分配权限实现"><a href="#分配权限实现" class="headerlink" title="分配权限实现"></a>分配权限实现</h6><p><code>Tree</code> 内部使用了 Node 类型的对象来包装用户传入的数据，用来保存目前节点的状态。 <code>Tree</code> 拥有如下方法：</p>
<table>
<thead>
<tr>
<th align="left">方法名</th>
<th align="left">说明</th>
<th align="left">参数</th>
</tr>
</thead>
<tbody><tr>
<td align="left">getCheckedKeys</td>
<td align="left">若节点可被选择（即 <code>show-checkbox</code> 为 <code>true</code>），则返回目前被选中的节点的 key 所组成的数组</td>
<td align="left">(leafOnly) 接收一个 boolean 类型的参数，若为 <code>true</code> 则仅返回被选中的叶子节点的 keys，默认值为 <code>false</code></td>
</tr>
<tr>
<td align="left">getHalfCheckedNodes</td>
<td align="left">若节点可被选择（即 <code>show-checkbox</code> 为 <code>true</code>），则返回目前半选中的节点所组成的数组</td>
<td align="left">-</td>
</tr>
</tbody></table>
<p>API</p>
<ul>
<li>请求路径：roles/:roleId/rights</li>
<li>请求方法：post</li>
<li>请求参数：通过 <code>请求体</code> 发送给后端</li>
</ul>
<table>
<thead>
<tr>
<th>参数名</th>
<th>参数说明</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>:roleId</td>
<td>角色 ID</td>
<td>不能为空<code>携带在url中</code></td>
</tr>
<tr>
<td>rids</td>
<td>权限 ID 列表（字符串）</td>
<td>以 <code>,</code> 分割的权限 ID 列表（获取所有被选中、叶子节点的key和半选中节点的key, 包括 1，2，3级节点）</td>
</tr>
</tbody></table>
<ul>
<li>响应数据</li>
</ul>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;data&quot;: null,</span><br><span class="line">    &quot;meta&quot;: &#123;</span><br><span class="line">        &quot;msg&quot;: &quot;更新成功&quot;,</span><br><span class="line">        &quot;status&quot;: 200</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p>思路</p>
<p>首先点击权限按钮的时候立即将角色的 id 先保存到 数据中 以供后续使用</p>
<p><img src="C:%5CUsers%5C62793%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201208105308450.png" alt="image-20201208105308450"></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&lt;el-button type&#x3D;&quot;primary&quot; @click&#x3D;&quot;allotRights&quot;&gt;确 定&lt;&#x2F;el-button&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#x2F;&#x2F; 点击为角色分配权限</span><br><span class="line">async allotRights () &#123;</span><br><span class="line">  const keys &#x3D; [</span><br><span class="line">    ...this.$refs.treeRef.getCheckedKeys(),</span><br><span class="line">    ...this.$refs.treeRef.getHalfCheckedNodes()</span><br><span class="line">  ]</span><br><span class="line">  &#x2F;&#x2F; console.log(keys)英文的逗号拼成字符串</span><br><span class="line">  const idStr &#x3D; keys.join(&#39;,&#39;)</span><br><span class="line">  const &#123; data: res &#125; &#x3D; await this.$http.post(&#96;roles&#x2F;$&#123;this.roleId&#125;&#x2F;rights&#96;, &#123; rids: idStr &#125;)</span><br><span class="line">  if (res.meta.status !&#x3D;&#x3D; 200) &#123;</span><br><span class="line">    return this.$message.error(&#39;分配权限失败&#39;)</span><br><span class="line">  &#125;</span><br><span class="line">  this.$message.success(&#39;分配权限成功&#39;)</span><br><span class="line">  &#x2F;&#x2F; 重新获取</span><br><span class="line">  this.getRolesList()</span><br><span class="line">  &#x2F;&#x2F; 隐藏会话框</span><br><span class="line">  this.setRightDialogVisible &#x3D; false</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="用户列表-分配角色"><a href="#用户列表-分配角色" class="headerlink" title="用户列表-分配角色"></a>用户列表-分配角色</h5></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Yang</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://yang8369.github.io/2020/12/22/%E5%88%9B%E5%BB%BAvue/">https://yang8369.github.io/2020/12/22/创建vue/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/vue-elementui/">vue-elementui</a><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg3.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpg" target="_blank"><img class="post-qr-code-img" src="/img/alipay.jpg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/12/22/Hexo-Butterfly/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Hexo-Butterfly搭建</div></div></a></div><div class="next-post pull-right"><a href="/2020/06/16/Git/"><img class="next-cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">Git</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div class="vcomment" id="vcomment"></div></div></div></div></div><div class="aside_content" id="aside_content"><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80%E3%80%81%E5%88%9B%E5%BB%BAvue"><span class="toc-number">1.</span> <span class="toc-text">一、创建vue</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C%E3%80%81%E5%88%9B%E5%BB%BAgitee"><span class="toc-number">2.</span> <span class="toc-text">二、创建gitee</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89%E3%80%81%E5%BC%80%E5%A7%8B%E6%89%A7%E8%A1%8C%E9%A1%B9%E7%9B%AE"><span class="toc-number">3.</span> <span class="toc-text">三、开始执行项目</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#node-app-js-%E8%BF%90%E8%A1%8C%E6%8E%A5%E5%8F%A3%E6%96%87%E6%A1%A3"><span class="toc-number">3.1.</span> <span class="toc-text">node .\app.js  运行接口文档</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B%E3%80%81%E5%BC%80%E5%A7%8B"><span class="toc-number">4.</span> <span class="toc-text">四、开始</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A0%E6%89%93%E5%BC%80-vue-ui-%E5%9C%A8-%E4%BB%BB%E5%8A%A1%E4%B8%AD-%E5%BC%80%E5%A7%8B-serve-%E5%90%AF%E5%8A%A8app"><span class="toc-number">4.0.1.</span> <span class="toc-text">①打开 vue ui 在 任务中 开始 serve   启动app</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A1%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84-Login%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">4.0.2.</span> <span class="toc-text">②创建新的 Login单文件组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A2%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%B7%AF%E7%94%B1router%E7%BB%84%E5%90%88-%E8%BF%9B%E5%85%A5%E8%B7%AF%E7%94%B1"><span class="toc-number">4.0.3.</span> <span class="toc-text">③第一次路由router组合 进入路由</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A3%E5%9C%A8App%E6%A0%B9%E7%BB%84%E4%BB%B6%E4%B8%AD%E6%B7%BB%E5%8A%A0%E5%8D%A0%E4%BD%8D%E7%AC%A6"><span class="toc-number">4.0.4.</span> <span class="toc-text">④在App根组件中添加占位符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5%E6%B7%BB%E5%8A%A0%E7%99%BB%E5%BD%95%E6%A0%B7%E5%BC%8F"><span class="toc-number">4.0.5.</span> <span class="toc-text">⑥添加登录样式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A5%E9%85%8D%E7%BD%AE%E5%85%A8%E5%B1%80%E6%A0%B7%E5%BC%8F%E8%A1%A8"><span class="toc-number">4.0.6.</span> <span class="toc-text">⑥配置全局样式表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A6%E6%B7%BB%E5%8A%A0%E7%99%BB%E5%BD%95%E7%95%8C%E9%9D%A2%E7%AA%97%E5%8F%A3"><span class="toc-number">4.0.7.</span> <span class="toc-text">⑦添加登录界面窗口</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A8%E7%BB%98%E5%88%B6%E7%99%BB%E5%BD%95%E8%A1%A8%E5%8D%95%E5%8C%BA"><span class="toc-number">4.0.8.</span> <span class="toc-text">⑨绘制登录表单区</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E2%91%A9%E8%A1%A8%E5%8D%95%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%91%E5%AE%9A"><span class="toc-number">4.0.9.</span> <span class="toc-text">⑩表单的数据绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99"><span class="toc-number">4.0.10.</span> <span class="toc-text">表单验证规则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%88%B6%E8%A1%A8%E5%8D%95"><span class="toc-number">4.0.11.</span> <span class="toc-text">重制表单</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E9%A2%84%E6%A0%A1%E9%AA%8C"><span class="toc-number">4.0.12.</span> <span class="toc-text">登录预校验</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E6%8E%A5%E5%8F%A3"><span class="toc-number">4.0.13.</span> <span class="toc-text">登录接口</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BA%E7%8E%B0-promise-%E6%97%B6-%E8%A6%81%E5%8A%A0%E4%B8%8A-await-%E5%92%8C-async"><span class="toc-number">4.0.13.1.</span> <span class="toc-text">出现 promise 时 要加上 await 和 async</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%B9%E7%AA%97"><span class="toc-number">4.0.14.</span> <span class="toc-text">弹窗</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E9%99%86%E6%88%90%E5%8A%9F-%E4%BF%9D%E5%AD%98-token-%E8%B7%B3%E8%BD%AC%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.0.15.</span> <span class="toc-text">登陆成功 保存 token 跳转页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B7%AF%E7%94%B1%E5%AF%BC%E8%88%AA%E5%AE%88%E5%8D%AB%E6%8E%A7%E5%88%B6%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90"><span class="toc-number">4.0.16.</span> <span class="toc-text">路由导航守卫控制访问权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95-gt-%E9%80%80%E5%87%BA"><span class="toc-number">4.0.17.</span> <span class="toc-text">登录-&gt;退出</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8B%A5%E5%87%BA%E7%8E%B0%E9%94%99%E8%AF%AF-%E5%8F%8C%E5%BC%95%E5%8F%B7-%E5%92%8C-%E5%88%86%E5%8F%B7%E7%9A%84%E9%94%99%E8%AF%AF-%E4%BB%A5%E5%8F%8A-%E6%8B%AC%E5%8F%B7%E7%9A%84%E9%94%99%E8%AF%AF"><span class="toc-number">4.0.17.0.1.</span> <span class="toc-text">若出现错误 双引号 和 分号的错误  以及 括号的错误</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8A%E4%BC%A0%E8%87%B3gitee"><span class="toc-number">4.0.18.</span> <span class="toc-text">上传至gitee</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%A1%B5%E5%B8%83%E5%B1%80"><span class="toc-number">4.0.19.</span> <span class="toc-text">主页布局</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%A4%B4%E9%83%A8%E5%B8%83%E5%B1%80"><span class="toc-number">4.0.19.1.</span> <span class="toc-text">①头部布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E5%B7%A6%E4%BE%A7%E8%8F%9C%E5%8D%95%E5%B8%83%E5%B1%80"><span class="toc-number">4.0.19.2.</span> <span class="toc-text">②左侧菜单布局</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E9%80%9A%E8%BF%87%E6%8E%A5%E5%8F%A3%E8%8E%B7%E5%8F%96%E8%8F%9C%E5%8D%95%E6%95%B0%E6%8D%AE"><span class="toc-number">4.0.19.3.</span> <span class="toc-text">③通过接口获取菜单数据</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E5%8F%91%E8%B5%B7%E8%AF%B7%E6%B1%82%E8%8E%B7%E5%8F%96%E8%8F%9C%E5%8D%95%E4%B8%80%E6%A0%8F"><span class="toc-number">4.0.19.4.</span> <span class="toc-text">④发起请求获取菜单一栏</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E8%8F%9C%E5%8D%95%E6%A0%8F%E5%9B%BE%E6%A0%87%E4%BF%AE%E6%94%B9"><span class="toc-number">4.0.19.5.</span> <span class="toc-text">⑤菜单栏图标修改</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A5%E8%8F%9C%E5%8D%95%E4%B8%80%E6%A0%8F%E5%8F%AA%E5%B1%95%E5%BC%80%E4%B8%80%E4%B8%AA%E5%AD%90%E8%8F%9C%E5%8D%95"><span class="toc-number">4.0.19.6.</span> <span class="toc-text">⑥菜单一栏只展开一个子菜单</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A6%E6%8C%89%E9%92%AE%E6%8A%98%E5%8F%A0"><span class="toc-number">4.0.19.7.</span> <span class="toc-text">⑦按钮折叠</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A6%96%E9%A1%B5%E8%B7%AF%E7%94%B1%E7%9A%84%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">4.0.20.</span> <span class="toc-text">首页路由的重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%80%9D%E8%B7%AF%EF%BC%9A"><span class="toc-number">4.0.20.1.</span> <span class="toc-text">思路：</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%AE%9A%E4%B9%89-Welcome%E7%BB%84%E4%BB%B6"><span class="toc-number">4.0.20.2.</span> <span class="toc-text">①定义 Welcome组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E4%BA%8C%E7%BA%A7%E8%8F%9C%E5%8D%95%E6%94%B9%E4%B8%BA%E8%B7%AF%E7%94%B1%E9%93%BE%E6%8E%A5"><span class="toc-number">4.0.20.3.</span> <span class="toc-text">②二级菜单改为路由链接</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86-%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8"><span class="toc-number">4.0.21.</span> <span class="toc-text">用户管理-用户列表</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A0%E5%88%9B%E5%BB%BAUsers%E7%BB%84%E4%BB%B6"><span class="toc-number">4.0.21.1.</span> <span class="toc-text">①创建Users组件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A1%E4%BA%8C%E7%BA%A7%E8%8F%9C%E5%8D%95%E8%A2%AB%E9%80%89%E4%B8%AD%E6%97%B6%EF%BC%8C%E9%AB%98%E4%BA%AE"><span class="toc-number">4.0.21.2.</span> <span class="toc-text">②二级菜单被选中时，高亮</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A2%E7%BB%98%E5%88%B6%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E5%9F%BA%E6%9C%ACUI%E7%BB%93%E6%9E%84"><span class="toc-number">4.0.21.3.</span> <span class="toc-text">③绘制用户列表基本UI结构</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E9%9D%A2%E5%8C%85%E5%B1%91"><span class="toc-number">4.0.21.3.1.</span> <span class="toc-text">添加面包屑</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%8D%A1%E7%89%87-%E6%90%9C%E7%B4%A2%E4%B8%8E%E6%B7%BB%E5%8A%A0%E6%A0%8F"><span class="toc-number">4.0.21.3.2.</span> <span class="toc-text">添加卡片 搜索与添加栏</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">4.0.21.3.3.</span> <span class="toc-text">获取用户列表数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE"><span class="toc-number">4.0.21.3.4.</span> <span class="toc-text">渲染用户列表数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%94%B9%E9%80%A0%E7%8A%B6%E6%80%81%E4%B8%80%E5%88%97"><span class="toc-number">4.0.21.3.5.</span> <span class="toc-text">改造状态一列</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%93%8D%E4%BD%9C%E4%B8%80%E5%88%97"><span class="toc-number">4.0.21.3.6.</span> <span class="toc-text">自定义操作一列</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">4.0.21.3.7.</span> <span class="toc-text">分页</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E7%8A%B6%E6%80%81%E4%BF%AE%E6%94%B9"><span class="toc-number">4.0.21.3.8.</span> <span class="toc-text">用户状态修改</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%90%9C%E7%B4%A2%E6%A1%86"><span class="toc-number">4.0.21.3.9.</span> <span class="toc-text">实现搜索框</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E2%80%9C%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E2%80%9D%E5%BC%B9%E7%AA%97%E5%8A%9F%E8%83%BD"><span class="toc-number">4.0.21.3.10.</span> <span class="toc-text">实现“添加用户”弹窗功能</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%9C%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E2%80%9D%E5%BC%B9%E7%AA%97%E4%B8%AD%E6%98%BE%E7%A4%BA%E8%A1%A8%E5%8D%95"><span class="toc-number">4.0.21.3.11.</span> <span class="toc-text">“添加用户”弹窗中显示表单</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%9C%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E2%80%9D%E5%BC%B9%E7%AA%97%E8%87%AA%E5%AE%9A%E4%B9%89%E6%89%8B%E6%9C%BA-%E9%82%AE%E7%AE%B1-%E6%AD%A3%E5%88%99%E9%AA%8C%E8%AF%81"><span class="toc-number">4.0.21.3.12.</span> <span class="toc-text">“添加用户”弹窗自定义手机&#x2F;邮箱 - 正则验证</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%9C%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E2%80%9D%E5%BC%B9%E7%AA%97-%E9%87%8D%E7%BD%AE%E6%95%B0%E6%8D%AE"><span class="toc-number">4.0.21.3.13.</span> <span class="toc-text">“添加用户”弹窗-重置数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%9C%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E2%80%9D%E5%BC%B9%E7%AA%97-%E7%A1%AE%E5%AE%9A%E9%A2%84%E6%A0%A1%E9%AA%8C%E4%BA%8B%E4%BB%B6"><span class="toc-number">4.0.21.3.14.</span> <span class="toc-text">“添加用户”弹窗-确定预校验事件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E2%80%9C%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7%E2%80%9D%E5%BC%B9%E7%AA%97-%E7%A1%AE%E5%AE%9A-%E7%94%A8%E6%88%B7%E6%B7%BB%E5%8A%A0%E6%88%90%E5%8A%9F"><span class="toc-number">4.0.21.3.15.</span> <span class="toc-text">“添加用户”弹窗-确定-用户添加成功</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9-%E5%BC%B9%E5%87%BA%E5%AF%B9%E8%AF%9D%E6%A1%86"><span class="toc-number">4.0.21.3.16.</span> <span class="toc-text">用户信息修改-弹出对话框</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9-%E5%BC%B9%E5%87%BA%E5%AF%B9%E8%AF%9D%E6%A1%86-%E6%A0%B9%E6%8D%AEID%E8%8E%B7%E5%8F%96%E4%BF%A1%E6%81%AF"><span class="toc-number">4.0.21.3.17.</span> <span class="toc-text">用户信息修改-弹出对话框-根据ID获取信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF%E4%BF%AE%E6%94%B9-%E5%BC%B9%E5%87%BA%E5%AF%B9%E8%AF%9D%E6%A1%86-%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%8D%95"><span class="toc-number">4.0.21.3.18.</span> <span class="toc-text">用户信息修改-弹出对话框-修改表单</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%8D%95%E9%87%8D%E7%BD%AE"><span class="toc-number">4.0.21.3.19.</span> <span class="toc-text">修改表单重置</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%8D%95%E6%8F%90%E4%BA%A4"><span class="toc-number">4.0.21.3.20.</span> <span class="toc-text">修改表单提交</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E5%88%97%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">4.0.21.3.21.</span> <span class="toc-text">删除列表操作</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A3%E5%88%9B%E5%BB%BA%E6%96%B0%E7%9A%84rights%E5%88%86%E6%94%AF"><span class="toc-number">4.0.21.4.</span> <span class="toc-text">④创建新的rights分支</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A4%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8"><span class="toc-number">4.0.21.5.</span> <span class="toc-text">⑤权限列表</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA"><span class="toc-number">4.0.21.5.1.</span> <span class="toc-text">创建</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8%E9%A1%B5%E9%9D%A2%E5%B8%83%E5%B1%80%E6%B8%B2%E6%9F%93"><span class="toc-number">4.0.21.5.2.</span> <span class="toc-text">权限列表页面布局渲染</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A5%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86%E4%B8%9A%E5%8A%A1%E5%88%86%E6%9E%90"><span class="toc-number">4.0.21.6.</span> <span class="toc-text">⑥权限管理业务分析</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E2%91%A6%E8%A7%92%E8%89%B2%E5%88%97%E8%A1%A8%E8%B7%AF%E7%94%B1%E7%9A%84%E5%88%87%E6%8D%A2"><span class="toc-number">4.0.21.7.</span> <span class="toc-text">⑦角色列表路由的切换</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93"><span class="toc-number">4.0.21.7.1.</span> <span class="toc-text">列表渲染</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%EF%BC%8C%E7%BC%96%E8%BE%91%EF%BC%8C%E5%88%A0%E9%99%A4"><span class="toc-number">4.0.21.7.2.</span> <span class="toc-text">添加，编辑，删除</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%92%E8%89%B2%E6%9D%83%E9%99%90%E5%88%97%E8%A1%A8%E4%B8%8B%E6%8B%89%E5%B1%95%E7%A4%BA"><span class="toc-number">4.0.21.7.3.</span> <span class="toc-text">角色权限列表下拉展示</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BC%98%E5%8C%96"><span class="toc-number">4.0.21.7.4.</span> <span class="toc-text">优化</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%BA%E6%AF%8F%E4%B8%80%E4%B8%AA%E6%A0%87%E7%AD%BE%E6%B7%BB%E5%8A%A0%E5%88%A0%E9%99%A4"><span class="toc-number">4.0.21.7.5.</span> <span class="toc-text">为每一个标签添加删除</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90"><span class="toc-number">4.0.21.7.6.</span> <span class="toc-text">分配权限</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#bug%E4%BC%98%E5%8C%96%E2%80%94-%E5%AF%B9%E8%AF%9D%E6%A1%86%E5%85%B3%E9%97%AD%E6%9C%AA%E6%B8%85%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">4.0.21.7.7.</span> <span class="toc-text">bug优化— 对话框关闭未清除数据</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%86%E9%85%8D%E6%9D%83%E9%99%90%E5%AE%9E%E7%8E%B0"><span class="toc-number">4.0.21.7.8.</span> <span class="toc-text">分配权限实现</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%88%97%E8%A1%A8-%E5%88%86%E9%85%8D%E8%A7%92%E8%89%B2"><span class="toc-number">4.0.21.8.</span> <span class="toc-text">用户列表-分配角色</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 By Yang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to my <a target="_blank" rel="noopener" href="https://butterfly.js.org/">blog</a>!</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="font-plus" type="button" title="Increase font size"><i class="fas fa-plus"></i></button><button id="font-minus" type="button" title="Decrease font size"><i class="fas fa-minus"></i></button><button id="translateLink" type="button" title="Switch Between Traditional Chinese And Simplified Chinese">簡</button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><div class="js-pjax"><script>if (document.getElementsByClassName('mermaid').length) {
  if (window.mermaidJsLoad) mermaid.init()
  else {
    getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(() => {
      window.mermaidJsLoad = true
      mermaid.initialize({
        theme: 'default',
      })
      false && mermaid.init()
    })
  }
}</script><script>function loadValine () {
  function initValine () {
    let initData = {
      el: '#vcomment',
      appId: 'NnmJus2ejrDbi1DEX0A1E2eC-gzGzoHsz',
      appKey: '5CiIdBrUa2qOpS4pzEwPsN8t',
      placeholder: 'Please leave your footprints',
      avatar: 'monsterid',
      meta: 'nick,mail,link'.split(','),
      pageSize: '10',
      lang: 'en',
      recordIP: false,
      serverURLs: '',
      emojiCDN: '',
      emojiMaps: {"tv_doge":"6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png","tv_親親":"a8111ad55953ef5e3be3327ef94eb4a39d535d06.png","tv_偷笑":"bb690d4107620f1c15cff29509db529a73aee261.png","tv_再見":"180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png","tv_冷漠":"b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png","tv_發怒":"34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png","tv_發財":"34db290afd2963723c6eb3c4560667db7253a21a.png","tv_可愛":"9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png","tv_吐血":"09dd16a7aa59b77baa1155d47484409624470c77.png","tv_呆":"fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png","tv_嘔吐":"9f996894a39e282ccf5e66856af49483f81870f3.png","tv_困":"241ee304e44c0af029adceb294399391e4737ef2.png","tv_壞笑":"1f0b87f731a671079842116e0991c91c2c88645a.png","tv_大佬":"093c1e2c490161aca397afc45573c877cdead616.png","tv_大哭":"23269aeb35f99daee28dda129676f6e9ea87934f.png","tv_委屈":"d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png","tv_害羞":"a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png","tv_尷尬":"7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png","tv_微笑":"70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png","tv_思考":"90cf159733e558137ed20aa04d09964436f618a1.png","tv_驚嚇":"0d15c7e2ee58e935adc6a7193ee042388adc22af.png"},
      enableQQ: false,
      path: window.location.pathname,
    }

    if (true) { 
      initData.requiredFields= ('nick,mail'.split(','))
    }
    
    if (false) {
      const otherData = false
      initData = Object.assign({}, initData, otherData)
    }
    
    const valine = new Valine(initData)
  }

  if (typeof Valine === 'function') initValine() 
  else getScript('https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js').then(initValine)
}

if ('Valine' === 'Valine' || !false) {
  if (false) btf.loadComment(document.querySelector('#vcomment'),loadValine)
  else setTimeout(loadValine, 0)
} else {
  function loadOtherComment () {
    loadValine()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div class="aplayer no-destroy" data-id="000PeZCQ1i4XVs" data-server="tencent" data-type="artist" data-fixed="true" data-mini="true" data-listFolded="false" data-order="random" data-preload="none" data-autoplay="true" muted></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script></div></body></html>